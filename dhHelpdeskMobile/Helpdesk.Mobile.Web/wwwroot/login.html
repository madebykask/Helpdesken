
<button id="login" > Login </button>

<pre id="results"></pre>

<script type='text/javascript'>

    document.getElementById("login").addEventListener("click", login, false);

    function login() {
        var url = new URL(window.location.href);
        var returnUrl = url.searchParams.get("returnUrl");
        var json = JSON.stringify({
            username:'hg',
            password:'hg', 
            returnUrl: returnUrl
        });
        var xhr = new XMLHttpRequest();
        xhr.open("POST", "https://localhost:449/api/account/login");
        xhr.setRequestHeader('Content-type', 'application/json; charset=utf-8');
        xhr.onload = function () {
            var result = JSON.parse(xhr.responseText);
            log(xhr.status, JSON.parse(xhr.responseText));
            window.location = result.returnUrl;
        }
        xhr.send(json);        
    }

    function log() {
    document.getElementById('results').innerText = '';

    Array.prototype.forEach.call(arguments, function (msg) {
        if (msg instanceof Error) {
            msg = "Error: " + msg.message;
        }
        else if (typeof msg !== 'string') {
            msg = JSON.stringify(msg, null, 2);
        }
        document.getElementById('results').innerHTML += msg + '\r\n';
    });
}

</script>