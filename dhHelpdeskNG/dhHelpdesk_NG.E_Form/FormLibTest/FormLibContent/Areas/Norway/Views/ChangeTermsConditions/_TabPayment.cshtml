@model DH.Helpdesk.EForm.FormLib.Models.FormModel
@using DH.Helpdesk.EForm.FormLib;
@using DH.Helpdesk.EForm.FormLib.Models;
@{
    var workingGroups = FormLibSessions.User.WorkingGroups.Where(c => c.CustomerId == Model.Form.CustomerId).Select(x => x.Name).ToArray();

    var fillOldVal = TempData["oldValues"];
    var newfill = (List<KeyValuePair<string, string>>)fillOldVal;        
}
<div class="tab-pane" id="Payment">
    <div class="span12">
        <table class="table">
            <tbody>
                <tr>
                    <td class="tdstrong" colspan="2">
                        <h4>@Model.Translate("Basic pay")</h4>
                    </td>
                     <td class="tdstrong current-record-th"><h4>@Model.Translate("Current record")</h4></td>
                </tr>
                <tr>
                    <td class="tdstrong">@Model.Label("PayrollCategory")</td>
                    <td>
                        @Model.Element("PayrollCategory")
                    </td>
                    <td></td>
                </tr>
                <tr>
                    <td class="tdstrong">@Model.Label("PSGroup")</td>
                    <td>
                        @Model.Element("PSGroup")
                    </td>
                    <td>
                        <input type="hidden" class="oldValue" id="OLD_PSGroup" name="OLD_PSGroup" value="@((newfill != null) ? newfill.Where(x => x.Key == "OLD_PSGroup").Select(x => x.Value).FirstOrDefault() : "")"/>
                        <em class="muted" id="emOLD_PSGroup">@((newfill != null) ? newfill.Where(x => x.Key == "OLD_PSGroup").Select(x => x.Value).FirstOrDefault() : "")</em>
                    </td>
                </tr>
                <tr>
                    <td class="tdstrong">@Model.Label("Level")</td>
                    <td>
                        @Model.Element("Level")
                    </td>
                    <td></td>
                </tr>
                <tr>
                    <td class="tdstrong" style="vertical-align:top !important;">@Model.Label("BasicPayAmount")</td>
                    <td>
                        @Model.Element("BasicPayAmount")                            
                    </td>         
                </tr>              
                <tr>
                    <td class="tdstrong">@Model.Label("PaidPer")</td>
                    <td>
                        @Model.Element("PaidPer")
                    </td>
                    <td></td>
                </tr>
                <tr>
                    <td class="tdstrong">@Model.Label("Overtime")</td>
                    <td>
                        @Model.Element("Overtime")
                    </td>
                    <td></td>
                </tr>
                <tr>
                    <td class="tdstrong">@Model.Label("ParticipatingInJour")</td>
                    <td>
                        @Model.Element("ParticipatingInJour")
                    </td>
                    <td></td>
                </tr>
                <tr>
                    <td class="tdstrong">@Model.Label("BasicPayChangeReason")</td>
                    <td>
                        @Model.Element("BasicPayChangeReason")
                    </td>
                    <td></td>
                </tr>
                <tr>
                    <td class="tdstrong" style="vertical-align:top !important;">@Model.Label("NextTariff_Year")</td>
                    <td>
                         @Model.Element("NextTariff_Day_Month")                   
                         @Model.Element("NextTariff_Year",workingGroups,true) 
                         @Model.Element("NextTariff")
                    </td>
                    <td></td>
                </tr>
                <tr>
                    <td class="tdstrong">@Model.Label("Autopunch")</td>
                    <td>
                        @Model.Element("Autopunch")
                    </td>
                    <td></td>
                </tr>
                <tr>
                    <td class="tdstrong" colspan="2">
                        <h4>@Model.Translate("Allowances")</h4>
                    </td>
                     <td class="tdstrong current-record-th">
                        <h4>@Model.Translate("Current record")</h4>
                    </td>
                </tr>
                <tr>
                    <td class="tdstrong">@Model.Label("AllowancesChangeType")</td>
                    <td>
                        @Model.Element("AllowancesChangeType")                       
                    </td>
                    <td></td>
                </tr>   
                <tr>
                    <td class="tdstrong">@Model.Label("AllowancesType")</td>
                    <td>
                        @Model.Element("AllowancesType")                       
                    </td>
                    <td></td>
                </tr>                
                <tr>
                    <td class="tdstrong">@Model.Label("AllowancesAmountUnits")</td>
                    <td>
                        @Model.Element("AllowancesAmountUnits")
                    </td>
                    <td></td>
                </tr>
                <tr>
                    <td class="tdstrong">@Model.Label("AllowancesPaidPer")</td>
                    <td>
                        @Model.Element("AllowancesPaidPer")
                    </td>
                    <td></td>
                </tr>
                <tr>
                    <td class="tdstrong">@Model.Label("AllowancesValidFrom")</td>
                    <td>
                        @Model.Element("AllowancesValidFrom")
                    </td>
                    <td></td>
                </tr>
                <tr>
                    <td class="tdstrong">@Model.Label("AllowancesValidTo")</td>
                    <td>
                        @Model.Element("AllowancesValidTo")
                    </td>
                    <td></td>
                </tr>

                @for(int i = 2; i <= FormLibConstants.FormField.MultipleEntrySectionsNr; i++)
                {
                    <tr class="allowance@(i.ToString())" id="allowance@(i.ToString())">
                        <td class="tdstrong" colspan="2">
                            <h4>@Model.Translate("Allowances") @(i.ToString())</h4>
                        </td>
                        <td></td>
                    </tr>
                    <tr class="allowance@(i.ToString())">
                        <td class="tdstrong">@Model.Label("AllowancesChangeType" + i.ToString())</td>
                        <td>
                            @Model.Element("AllowancesChangeType" + i.ToString())</td>
                        <td></td>
                    </tr>
                    <tr class="allowance@(i.ToString())">
                        <td class="tdstrong">@Model.Label("AllowancesType" + i.ToString())</td>
                        <td>
                            @Model.Element("AllowancesType" + i.ToString())                           
                        </td>
                        <td></td>
                    </tr>                   
                    <tr class="allowance@(i.ToString())">
                        <td class="tdstrong">@Model.Label("AllowancesAmountUnits" + i.ToString())</td>
                        <td>
                            @Model.Element("AllowancesAmountUnits" + i.ToString())</td>
                        <td></td>
                    </tr>
                    <tr class="allowance@(i.ToString())">
                        <td class="tdstrong">@Model.Label("AllowancesPaidPer" + i.ToString())</td>
                        <td>
                            @Model.Element("AllowancesPaidPer" + i.ToString())</td>
                        <td></td>
                    </tr>
                    <tr class="allowance@(i.ToString())">
                        <td class="tdstrong">@Model.Label("AllowancesValidFrom" + i.ToString())</td>
                        <td>
                            @Model.Element("AllowancesValidFrom" + i.ToString())</td>
                        <td></td>
                    </tr>
                    <tr class="allowance@(i.ToString())">
                        <td class="tdstrong">@Model.Label("AllowancesValidTo" + i.ToString())</td>
                        <td>
                            @Model.Element("AllowancesValidTo" + i.ToString())</td>
                        <td></td>
                    </tr>
                }
                <tr id="addAllowanceTrr">
                    <td colspan="2">
                        @Model.Element("Allowances")
                        <a id="addAllowance" class="btn btn-link btn-mini pull-right">@Model.Translate("Add another Allowance")</a></td>
                    <td></td>
                </tr>

                    <tr>
                    <td class="tdstrong" colspan="2">
                        <h4>@Model.Translate("Deductions")</h4>
                    </td>       
                    <td class="tdstrong current-record-th">
                        <h4>@Model.Translate("Current record")</h4>
                    </td>             
                </tr>
                <tr>
                    <td class="tdstrong">@Model.Label("DeductionsChangeType")</td>
                    <td>
                        @Model.Element("DeductionsChangeType")
                    </td>
                    <td></td>    
                </tr>
                <tr>
                    <td class="tdstrong">@Model.Label("DeductionsType")</td>
                    <td>
                        @Model.Element("DeductionsType")
                    </td>
                    <td></td>    
                </tr>               
                <tr>
                    <td class="tdstrong">@Model.Label("DeductionsAmountUnits")</td>
                    <td>
                        @Model.Element("DeductionsAmountUnits")
                    </td>
                    <td></td>    
                </tr>
                   <tr>
                    <td class="tdstrong">@Model.Label("DeductionsPer")</td>
                    <td>
                        @Model.Element("DeductionsPer")
                    </td>
                       <td></td>    
                </tr>
                <tr>
                    <td class="tdstrong">@Model.Label("DeductionsValidFrom")</td>
                    <td>
                        @Model.Element("DeductionsValidFrom")
                    </td>
                    <td></td>    
                </tr>
                <tr>
                    <td class="tdstrong">@Model.Label("DeductionsValidTo")</td>
                    <td>
                        @Model.Element("DeductionsValidTo")
                    </td>
                    <td></td>    
                </tr>

               @for(int i = 2; i <= FormLibConstants.FormField.MultipleEntrySectionsNr; i++)
               {
                   <tr class="deduction@(i.ToString())" id="deduction@(i.ToString())">
                       <td class="tdstrong" colspan="2">
                           <h4>@Model.Translate("Deductions") @(i.ToString())</h4>
                       </td>
                       <td></td>    
                   </tr>
                   <tr class="deduction@(i.ToString())">
                       <td class="tdstrong">@Model.Label("DeductionsChangeType" + i.ToString())</td>
                       <td>
                           @Model.Element("DeductionsChangeType" + i.ToString())</td>
                       <td></td>    
                   </tr>
                   <tr class="deduction@(i.ToString())">
                       <td class="tdstrong">@Model.Label("DeductionsType" + i.ToString())</td>
                       <td>
                           @Model.Element("DeductionsType" + i.ToString())</td>
                       <td></td>    
                   </tr>                   
                   <tr class="deduction@(i.ToString())">
                       <td class="tdstrong">@Model.Label("DeductionsAmountUnits" + i.ToString())</td>
                       <td>
                           @Model.Element("DeductionsAmountUnits" + i.ToString())</td>
                       <td></td>    
                   </tr>
                   <tr class="deduction@(i.ToString())">
                       <td class="tdstrong">@Model.Label("DeductionsPer" + i.ToString())</td>
                       <td>
                           @Model.Element("DeductionsPer" + i.ToString())</td>
                       <td></td>    
                   </tr>
                   <tr class="deduction@(i.ToString())">
                       <td class="tdstrong">@Model.Label("DeductionsValidFrom" + i.ToString())</td>
                       <td>
                           @Model.Element("DeductionsValidFrom" + i.ToString())</td>
                       <td></td>    
                   </tr>
                   <tr class="deduction@(i.ToString())">
                       <td class="tdstrong">@Model.Label("DeductionsValidTo" + i.ToString())</td>
                       <td>
                           @Model.Element("DeductionsValidTo" + i.ToString())</td>
                       <td></td>    
                   </tr>
                }
                <tr id="addDeductionTrr">
                    <td colspan="2">
                        @Model.Element("Deductions")
                        <a id="addDeduction" class="btn btn-link btn-mini pull-right">@Model.Translate("Add another Deduction")</a></td>
                    <td></td>    
                </tr>

                 <tr>
                    <td class="tdstrong" colspan="2">
                        <h4>@Model.Translate("Bonus Eligibility")</h4>
                    </td>
                    <td class="tdstrong current-record-th">
                        <h4>@Model.Translate("Current record")</h4>
                    </td>
                </tr>
                <tr>
                    <td class="tdstrong">@Model.Label("OneIKEABonusLevel")</td>
                    <td>
                        @Model.Element("OneIKEABonusLevel")
                    </td>
                </tr>

                <tr>
                    <td class="tdstrong" colspan="2">
                        <h4>@Model.Translate("Benefits")</h4>
                    </td>        
                    <td class="tdstrong current-record-th">
                        <h4>@Model.Translate("Current record")</h4>
                    </td>            
                </tr>

                <tr>
                    <td class="tdstrong">
                        
                        @Model.Label("BenefitChangeType")</td>
                    <td>

                        @Model.Element("BenefitChangeType")
                        
                    </td>
                    <td></td>    
                </tr>
                <tr>
                    <td class="tdstrong">@Model.Label("Benefit_MobilePhone")</td>
                    <td>
                        @Model.Element("Benefit_MobilePhone")
                    </td>
                    <td></td>    
                </tr>             
                <tr>
                    <td class="tdstrong">@Model.Label("Benefit_Broadband")</td>
                    <td>
                        @Model.Element("Benefit_Broadband")
                    </td>
                    <td></td>    
                </tr>        
                <tr>
                    <td class="tdstrong">@Model.Label("Benefit_Computer")</td>
                    <td>
                        @Model.Element("Benefit_Computer")
                    </td>
                    <td></td>    
                </tr>     <tr>
                    <td class="tdstrong">@Model.Label("Benefit_NewspaperSubscription")</td>
                    <td>
                        @Model.Element("Benefit_NewspaperSubscription")
                    </td>
                    <td></td>    
                </tr>     
                <tr>
                    <td class="tdstrong">@Model.Label("Benefit_CompanyCar")</td>
                    <td>
                        @Model.Element("Benefit_CompanyCar")
                    </td>
                    <td></td>    
                </tr>  
                <tr>
                    <td class="tdstrong">@Model.Label("Benefit_CarAllowance")</td>
                    <td>
                        @Model.Element("Benefit_CarAllowance")
                    </td>
                    <td></td>    
                </tr>        
                <tr>
                    <td class="tdstrong">@Model.Label("Benefit_OneWeek")</td>
                    <td>
                        @Model.Element("Benefit_OneWeek")
                    </td>
                    <td></td>    
                </tr>       
                <tr><td>@Model.Element("Benefit")</td><td></td></tr>
          

            </tbody>
        </table>
    </div>
 
    <input type="hidden" id="MultipleEntrySectionsNr" value="@FormLibConstants.FormField.MultipleEntrySectionsNr" />
</div>

@*Scripts Moved to TabCTCJS*@