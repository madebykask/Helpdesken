@using System.Activities.Statements
@using DH.Helpdesk.SelfService.Infrastructure
@model DH.Helpdesk.SelfService.Models.Case.CaseOverviewModel
@{
    ViewBag.Title = "Index";    
}

<div class="container-fluid dh-container">    
            
    <ul class="nav nav-tabs" id="NewCaseTab">
        <li id="CasePreviewTab" class="active">                             
            <a href="#fragment-1">@Translation.Get("Case", Enums.TranslationSource.TextTranslation): @Model.CasePreview.CaseNumber</a>                                         
        </li>
    </ul>

    <div class="content">                       
        @if (Model.CasePreview != null)
        {                
            <div id="fragment-1" class="tab-pane active" >                                                   
                <div class="container-fluid dh-container">
                                       
                    @if (Model.CasePreview.FinishingDate != null)
                    {
                        <div class="alert alert-success">
                            @if (Model.CustomerSettings.CaseComplaintDays != 0 )
                            {
                                TimeSpan diff = DateTime.Today - Model.CasePreview.FinishingDate.Value;
                                if (diff.Days <= Model.CustomerSettings.CaseComplaintDays || Model.CustomerSettings.CaseComplaintDays == 9999)
                                {
                                    <a id="btnReOpen" href="#logNotePopup" class="btn btn-success" onclick="">@Translation.Get("Re-open", Enums.TranslationSource.TextTranslation)</a>
                                }
                            }
                            <span class="glyphicon glyphicon-thumbs-up"></span>
                            @Translation.Get("Closed Case", Enums.TranslationSource.TextTranslation)
                            @Translation.Get(": ", Enums.TranslationSource.TextTranslation)
                            @Html.DisplayFor(m => Model.CasePreview.FinishingDate, "Date")
                        </div>
                    }
                    else
                    {
                        if (!string.IsNullOrEmpty(Model.CaseRegistrationMessage) && Model.ShowRegistringMessage)
                        {                            
                            <div class="alert alert-success">                                 
                                @Html.Raw(Model.CaseRegistrationMessage.SetHtmlParameters())
                            </div>   
                        }                      
                    }

                    @Html.Partial("_CaseReceipt", Model)                     
                                           
                </div>                
            </div>
            
        }          
                                   
    </div>    
</div>

