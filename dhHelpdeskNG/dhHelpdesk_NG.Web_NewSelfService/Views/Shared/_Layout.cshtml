@using System.Collections.Generic;
@using DH.Helpdesk.NewSelfService.Infrastructure
@using DH.Helpdesk.NewSelfService.Infrastructure.Extensions
@using DH.Helpdesk.NewSelfService.Infrastructure.Common;
@using DH.Helpdesk.Services.Infrastructure


<!DOCTYPE html>
<html>
<head>
    <meta content="html/text; charset=utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>@Translation.Get("dhHelpdesk", Enums.TranslationSource.TextTranslation)</title>

    <link rel="stylesheet" href="@Url.Content("~/Content/css/bootstrap.css")" />
    <link rel="stylesheet" href="@Url.Content("~/Content/css/selfservice.css")" />
    <link rel="stylesheet" href="@Url.Content("~/Content/css/profile.css")" />
    <link rel="stylesheet" href="@Url.Content("~/Content/js/jquery.plupload.queue/css/jquery.plupload.queue.css")" />
    

    <script type="text/javascript" src="@Url.Content("~/Content/js/jquery-1.11.0.min.js")"></script>
    <script type="text/javascript" src="@Url.Content("~/Content/js/jquery.unobtrusive-ajax.min.js")"></script>
    <script type="text/javascript" src="@Url.Content("~/Content/js/jquery.validate.min.js")"></script>
    <script type="text/javascript" src="@Url.Content("~/Content/js/jquery.validate.unobtrusive.min.js")"></script>
    <script type="text/javascript" src="@Url.Content("~/Content/js/jquery-ui-1.9.2.min.js")"></script>
    <script type="text/javascript" src="@Url.Content("~/Content/js/bootstrap.js")"></script>
    <script type="text/javascript" src="@Url.Content("~/Content/js/bootstrap-multiselect.js")"></script>
    <script type="text/javascript" src="@Url.Content("~/Content/js/bootstrap-datepicker.js")"></script>
    <script type="text/javascript" src="@Url.Content("~/Content/js/plupload.full.min.js")"></script>
    <script type="text/javascript" src="@Url.Content("~/Content/js/jquery.plupload.queue/jquery.plupload.queue.min.js")"></script>
    <script type="text/javascript" src="@Url.Content("~/Content/js/MicrosoftAjax.js")"></script>
    <script type="text/javascript" src="@Url.Content("~/Content/js/MicrosoftMvcAjax.js")"></script>

    <script type="text/javascript" src="@Url.Content("~/Content/js/Shared/custom.validation.requiredfrom.js")"></script>
    <script type="text/javascript" src="@Url.Content("~/Content/js/Shared/custom.validation.maxlengthfrom.js")"></script>
    <script type="text/javascript" src="@Url.Content("~/Content/js/Shared/sortby.js")"></script>

    <!--[if lt IE 9]>
	 <script src="@Url.Content("~/Content/js/html5shiv.js")"></script>
      <script src="@Url.Content("~/Content/js/respond.min.js")"></script>
	<![endif]-->


    <script type="text/javascript">
        //Tooltip on startpage
        $(document).ready(function () {

            $("* [rel='tooltip']").tooltip({
                html: true
            });

        });

        var isDirty = false;

        $(function () {

            $("input[type='text']").change(function () {
                isDirty = true;
            });

            // Delete dialog start 
            $(".deleteDialog").click(function (e) {

                e.preventDefault();

                var action = $(this).attr("href");
                var text = $(this).attr("deleteDialogText");

                var NewDialog = $('<div id="myModal" class="modal fade">\
                                        <div class="modal-dialog">\
                                            <form method="post" id="deleteDialogForm" class="modal-content">\
                                                <div class="modal-body">\
                                                    <button type="button" class="close" data-dismiss="modal">&times;</button>\
                                                    <p class="alert alert-info infop">\Infotext kommer här, ta ej bort</p>\
                                                </div>\
                                                <div class="modal-footer">\
                                                    <button type="button" class="btn btn-ok">@Translation.Get("Ta bort", Enums.TranslationSource.TextTranslation)</button>\
                                                    <button type="button" class="btn btn-cancel">@Translation.Get("Avbryt", Enums.TranslationSource.TextTranslation)</button>\
                                                </div>\
                                            </form>\
                                        </div>\
                                    </div>');

                NewDialog.on("show", function () {
                    NewDialog.find("form").attr("action", action);
                    NewDialog.find("p:eq(0)").text(text);

                    NewDialog.find(".btn-cancel").on("click", function (e) {
                        NewDialog.modal('hide');
                    });

                    NewDialog.find(".btn-ok").on("click", function (e) {
                        $("#deleteDialogForm").submit();
                        NewDialog.modal('hide');
                    });
                });

                NewDialog.on("hide", function () {
                    $("#myModal .btn-ok").off("click");
                    $("#myModal .btn-cancel").off("click");
                });

                NewDialog.on("hidden", function () {
                    $("#myModal").remove();
                });

                NewDialog.modal({
                    "backdrop": "static",
                    "keyboard": true,
                    "show": true
                });
            });
            // Delete dialog end

        });

    </script>
</head> 
<body>
     @{
         int pCustomerId = -1; 
         
         if (SessionFacade.CurrentCustomer != null)
         {
             pCustomerId = SessionFacade.CurrentCustomer.Id;
             SessionFacade.CurrentCustomerID = pCustomerId;
         }

         if (pCustomerId == -1 && SessionFacade.CurrentCustomerID > 0)
         {
             pCustomerId = SessionFacade.CurrentCustomerID;
             SessionFacade.CurrentCustomer.Id = pCustomerId;
         }

         var helper = ManualDependencyResolver.Get<ICommonFunctions>();

         var pCaseTemplates = helper.GetCaseTemplates(pCustomerId);
      } 
    <div style="position: fixed; top: 30%; right: -2px; background: #fff; padding: 20px 20px 5px 20px; border: 1px solid #ccc;">
        <ul class="nav nav-pills nav-stacked">
            <li class="active">
                <a href="#" data-toggle="modal" data-target="#myModal2">
                    <span class="badge pull-right">2</span>
                    Communicate
                </a>
            </li>
        </ul>
    </div>
    <div class="jumbotron">
        <div class="container-fluid">
            <a href="index.html">
                <div class="pull-left toplogo"></div>
            </a>
            <div class="pull-right small toplogout">
                <a href="#">Emil Lundvall</a> | <a href="#">Log out</a>
            </div>
        </div>
    </div>

    <div class="navbar navbar-default" role="navigation">
        <div class="container-fluid">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
            </div>
            <div class="navbar-collapse collapse">
                <ul class="nav navbar-nav">
                    <li class="blue">
                        <a href="@Url.Action("Index", "Start",new {customerId = pCustomerId, area = ""})">
                            <div class="ico-home"></div>
                            Start
                        </a>
                    </li>
                    <li class="dropdown blue">
                        <a href="#" class="dropdown-toggle blue" data-toggle="dropdown">
                            <div class="ico-new"></div>
                            Order New Service Request  
                        </a>
                               
                        <ul class="dropdown-menu">
                            @if (pCaseTemplates != null)
                            {                                
                                foreach (var c in pCaseTemplates)
                                {
                                    <li>
                                        @if (string.IsNullOrEmpty(c.TemplatePath))
                                        {
                                            <a href="@Url.Action("NewCase", "case", new { customerId = pCustomerId, caseTemplateId = c.Id, area = "" })">
                                                <span class="glyphicon glyphicon-plus"></span> @c.Name <br />
                                                <span class="small"> @c.Description </span>
                                            </a>                                     
                                        }
                                        else
                                        {
                                            <a href="@Url.Content(c.TemplatePath.SetUrlParameters())">
                                                <span class="glyphicon glyphicon-plus"></span> @c.Name <br />
                                                <span class="small"> @c.Description </span>
                                            </a>                                            
                                        }   
                                    </li>
                                }                                                                                                                                                                                        
                            }
                        </ul>                                                                                         
                    </li>
                    <li class="blue">                        
                        <a href="@Url.Action("UserCases", "case", new {customerId = pCustomerId , progressId = "2", area = ""})">
                            <div class="ico-ongoing"></div>
                            Ongoing Service Requests
                        </a>
                    </li>
                    <li class="blue">
                        <a href="@Url.Action("UserCases", "case", new {customerId = pCustomerId , progressId = "1", area = ""})">
                            <div class="ico-finished"></div>
                            Finished Service Requests
                        </a>
                    </li>
                    <li class="blue">
                        <a href="@Url.Action("Index", "Documents", new {customerId = pCustomerId, area = ""})">
                            <div class="ico-documents"></div>
                            HR Documents
                        </a>
                    </li>
                    <li class="blue">
                        <a href="@Url.Action("Index", "CoWorkers", new {customerId = pCustomerId, area = ""})">
                            <div class="ico-coworkers"></div>
                            My Co-Workers
                        </a>
                    </li>
                    <li class="dropdown blue">
                        <a href="#" class="dropdown-toggle blue" data-toggle="dropdown">
                            <div class="ico-help"></div>
                            Need Help?
                        </a>
                        <ul class="dropdown-menu">
                            <li><a href="@Url.Action("FindYourWay","Help",new {customerId = pCustomerId, area = ""} )">Find Your Way</a></li>
                            <li><a href="@Url.Action("Index","Help",new {customerId = pCustomerId, area = ""})">Help</a></li>
                            <li><a href="@Url.Action("About", "Help", new { customerId = pCustomerId, area = "" })">About</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </div>

    @*<div class="navbar fixed">
            <div class="navbar-container">
                <a href="/">
                    <div class="navbar-header pull-left navbar-brand">
                        <img src="@Url.Content("~/Content/img/dhhelpdesk.png")" class="navbar-brand" />
                    </div>
                </a>
                <div class="navbar-header pull-right">
                    <ul class="nav dh-nav">                        
                    </ul>
                </div>
            </div>
        </div>*@

    @*<script type="text/javascript" src="@Url.Content("~/Content/js/dhHelpdesk.js")"></script>*@
    @RenderBody()
    @RenderSection("Dialogs", false)
    <script type="text/javascript" src="@Url.Content("~/Content/js/dhHelpdesk.js")"></script>
    @RenderSection("Scripts", false)
    <input type="hidden" value="@this.Request.RawUrl" id="rawUrl" />

    <!-- Modal Test by Jonas -->
                            <div class="modal fade" id="myModal2" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                                <div class="modal-dialog" style="width:900px;">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                            <h3 class="modal-title" id="H1">Communicate</h3>
                                        </div>
                                        <div class="modal-body">
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <table class="table table-striped table-bordered table-hover">
                                                        <thead>
                                                            <tr>
                                                                <th>Date
                                                                </th>
                                                                <th>Comment
                                                                </th>
                                                                <th>Name
                                                                </th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr>
                                                                <td>2014-01-02
                                                                </td>
                                                                <td>Lorem ipsum dölor. Sit amet cönsectetur ädipisicing elit sed do. Eiusmod tempör incididunt ut läbore et. Dolöre mågnå åliqua. Adipiscing lectus amet tempör suspendisse leo elementum.
                                                                </td>
                                                                <td>Per Eriksson
                                                                </td>
                                                            </tr>
                                                            <tr>
                                                                <td>2014-02-03
                                                                </td>
                                                                <td>Lorem ipsum dölor. Sit amet cönsectetur ädipisicing elit sed do.
                                                                </td>
                                                                <td>Daniel Lönnesjö
                                                                </td>
                                                            </tr>
                                                            <tr>
                                                                <td>2014-03-04
                                                                </td>
                                                                <td>Eiusmod tempör incididunt ut läbore et. Dolöre mågnå åliqua. Adipiscing lectus amet tempör suspendisse leo elementum.
                                                                </td>
                                                                <td>Alf Larsson
                                                                </td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div class="form-group row">
                                                        <label class="col-md-2">
                                                            Add comment:
                                                        </label>
                                                        <div class="col-md-10">
                                                            <textarea></textarea>
                                                        </div>
                                                    </div>
                                                    <div class="form-group row">
                                                        <label class="col-md-2">
                                                            Attached File:
                                                        </label>
                                                        <div class="col-md-10">
                                                            <a href="#" role="button" data-toggle="modal" data-target="#myModal2" class="btn btn-default">Add</a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="modal-footer" style="text-align:left;">
                                            <button type="button" class="btn btn-success">Send</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
</body>
    
</html>
