@model ECT.FormLib.Models.FormModel
@using ECT.FormLib;
@using ECT.FormLib.Models;

<div class="tab-pane active" id="ServiceRequestDetails">
    <div class="span5">
        <table class="table">
            <tbody>
                <tr>
                    <td class="tdstrong" colspan="2">
                        <h4>@Model.Translate("Details")</h4>
                    </td>
                </tr>
                <tr>
                    <td class="tdstrong">@Model.Label("Co-WorkerGlobalviewID")</td>
                    <td>
                        @Model.Element("Co-WorkerGlobalviewID", false)
                    </td>
                </tr>
                <tr>
                    <td class="tdstrong">@Model.Label("FirstName")</td>
                    <td>
                        @Model.Element("FirstName", false)
                    </td>
                </tr>
                <tr>
                    <td class="tdstrong">@Model.Label("LastName")</td>
                    <td>
                        @Model.Element("LastName", false)</td>
                </tr>
                <tr>
                    <td class="tdstrong">@Model.Label("IKEAEmailAddress")</td>
                    <td>
                        @Model.Element("IKEAEmailAddress", false)
                    </td>
                </tr>
                <tr>
                    <td class="tdstrong">@Model.Label("IKEANetworkID")</td>
                    <td>
                        @Model.Element("IKEANetworkID", false)
                    </td>
                </tr>
                <tr>
                    <td class="tdstrong">@Model.Label("BusinessUnit")</td>
                    <td>
                        @Model.Element("BusinessUnit")
                    </td>
                </tr>
                <tr>
                    <td class="tdstrong">@Model.Label("Department")</td>
                    <td>
                        @Model.Element("Department")
                    </td>
                </tr>
                <tr>
                    <td class="tdstrong">@Model.Label("TECoWorker")</td>
                    <td>
                        @Model.Element("TECoWorker")</td>
                </tr>               

                <tr>
                    <td class="tdstrong">@Model.Label("ServiceRequestPriority")</td>
                    <td>
                        @Model.Element("ServiceRequestPriority")</td>
                </tr>
                <tr>
                    <td class="tdstrong">@Model.Label("ProcessBeforeDate")</td>
                    <td>
                        @Model.Element("ProcessBeforeDate")</td>
                </tr>         
            </tbody>
        </table>
    </div>
    
    <input type="hidden" id="CustomerId" value="@Model.CustomerId" />
</div>

<script>

    $('#ServiceRequestPriority').change(function () {
        $('#date_ProcessBeforeDate').datepicker("destroy");


        if ($(this).val() == 'Urgent') {
            
            var nowTemp = new Date();
            var now = new Date(nowTemp.getFullYear(), nowTemp.getMonth(), nowTemp.getDate(), 0, 0, 0, 0);
            var endDate = new Date(nowTemp.getFullYear(), nowTemp.getMonth(), nowTemp.getDate() + 3, 0, 0, 0, 0)

            $('#date_ProcessBeforeDate').not(".disabled").datepicker(
            {                
                onRender: function (ev) {
                    return ev.valueOf() >= endDate.valueOf() || ev.valueOf() < now.valueOf() ? 'disabled' : '';
                }
            });

            $("#date_ProcessBeforeDate").on("keydown keypress keyup", false);
        }
        else        
        {
            $('#date_ProcessBeforeDate').not(".disabled").datepicker(
            {
                onRender: function (ev) {
                    return '';
                }
            });

            document.getElementById('ProcessBeforeDate').onkeypress = function () { return true; }
        } 
    });
   
</script>