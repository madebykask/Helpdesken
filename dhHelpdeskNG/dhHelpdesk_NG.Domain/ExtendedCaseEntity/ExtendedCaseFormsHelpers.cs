using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace DH.Helpdesk.Domain.ExtendedCaseEntity
{
    public static class ExtendedCaseFormsHelper
    {
        public static string GetEditorInitiatorData(string firstTabName, string customerGuid)
        {
            return "{\"id\":\"InitiatorInfo\",\"name\":\"@Translation.Section.InitiatorInfo\",\"hiddenBinding\": function(m, log) { return true; },\"controls\":[{\"id\":\"UserId\",\"type\":\"textbox\",\"label\":\"User Id\",\"valueBinding\": function(m, log) { var ds = m.dataSources.getInitiatorByName; if (this.value != \"\") { return this.value; } else if (ds && ds.length > 0){ var userId = (ds[0].UserId || \"\"); return userId; } return this.value; },\"caseBinding\":\"reportedby\",\"caseBindingBehaviour\":\"newonly\"},{\"id\":\"Initiator\",\"type\":\"textbox\",\"label\":\"Initiator\",\"valueBinding\": function(m, log) {var ds = m.dataSources.getInitiatorByName; if (this.value != \"\") { return this.value; } else if (ds && ds.length > 0) { var flName = (ds[0].FirstName || \"\") + \" \" + (ds[0].LastName || \"\"); return flName.trim();} return this.value; },\"caseBinding\":\"persons_name\",\"caseBindingBehaviour\":\"newonly\"},{\"id\":\"Email\",\"type\":\"textbox\",\"label\":\"Email\",\"valueBinding\": function(m, log) { var ds = m.dataSources.getInitiatorByName; if (this.value != \"\") { return this.value; } else if (ds && ds.length > 0) { var email = (ds[0].Email || \"\"); return email; } return this.value; },\"validators\":{\"onSave\":[{\"type\":\"pattern\",\"value\":\".+\\\\@.+\\\\..+\",\"messageName\":\"email\"}]},\"caseBinding\":\"persons_email\",\"caseBindingBehaviour\":\"newonly\"},{\"id\":\"Phone\",\"type\":\"textbox\",\"label\":\"Phone\",\"valueBinding\": function(m, log) { var ds = m.dataSources.getInitiatorByName; if (this.value != \"\") { return this.value; } else if (ds && ds.length > 0) { var phone = (ds[0].Phone || \"\"); return phone; } return this.value; },\"caseBinding\":\"persons_phone\",\"caseBindingBehaviour\":\"newonly\"},{\"id\":\"Mobile\",\"type\":\"textbox\",\"label\":\"Mobile\",\"valueBinding\": function(m, log) { var ds = m.dataSources.getInitiatorByName; if (this.value != \"\") { return this.value; } else if (ds && ds.length > 0) { var cellphone = (ds[0].Mobile || \"\"); return cellphone; } return this.value; },\"caseBinding\":\"persons_cellphone\",\"caseBindingBehaviour\":\"newonly\"},{\"id\":\"regionId\",\"type\":\"dropdown\",\"label\":\"Region\",\"valueBinding\": function(m, log) { var ds = m.dataSources.getInitiatorByName; if (this.value != \"\") { return this.value; } else { if (ds && ds.length > 0) { var regionId = ds[0].RegionId; if (regionId !== null) { return ds[0].RegionId; } } } return this.value; },\"dataSource\":[{\"type\":\"option\",\"id\":\"RegionsByCustomer\",\"parameters\":[{\"name\":\"CustomerGuid\",\"field\":\"tabs." + firstTabName + ".sections.HiddenFields.controls.customerGuid\"}]}],\"caseBinding\":\"region_id\",\"caseBindingBehaviour\":\"newonly\"},{\"id\":\"departmentId\",\"type\":\"dropdown\",\"label\":\"Department\",\"valueBinding\": function(m, log) { var ds = m.dataSources.getInitiatorByName; if (this.value != \"\") { return this.value; } else { if (ds && ds.length > 0) { var departmentId = ds[0].DepartmentId; if (departmentId !== null) { return ds[0].DepartmentId; } } } return this.value; },\"dataSource\":[{\"type\":\"option\",\"id\":\"DepartmentsByCustomer\",\"parameters\":[{\"name\":\"CustomerGuid\",\"field\":\"tabs." + firstTabName + ".sections.HiddenFields.controls.customerGuid\"}]}],\"caseBinding\":\"department_id\",\"caseBindingBehaviour\":\"newonly\"},{\"id\":\"organizationalUnit\",\"type\":\"dropdown\",\"label\":\"Organizational Unit\",\"valueBinding\": function(m, log) { var ds = m.dataSources.getInitiatorByName; if (this.value != \"\") { return this.value; } else { if (ds && ds.length > 0) { var orgUnitId = ds[0].OU_Id; if (orgUnitId !== null) { return ds[0].OU_Id; } } } return this.value; },\"dataSource\":[{\"valueField\":\"Id\",\"textField\":\"OU\",\"type\":\"custom\",\"id\":\"OusByDepartmentDs\"}],\"caseBinding\":\"ou_id_1\",\"caseBindingBehaviour\":\"newonly\"},{\"id\":\"CostCentre\",\"type\":\"textbox\",\"label\":\"Cost Centre\",\"valueBinding\": function(m, log) { var ds = m.dataSources.getInitiatorByName; if (this.value != \"\") { return this.value; } else if (ds && ds.length > 0) { var costCentre = (ds[0].CostCentre || \"\"); return costCentre; } return this.value; }},{\"hiddenBinding\": function(m, log) { return true; },\"id\":\"CostCentreValue\",\"type\":\"textbox\",\"valueBinding\": function(m, log) { return this.parent.controls.CostCentre.value || \"\"; },\"caseBinding\":\"costcentre\",\"caseBindingBehaviour\":\"newonly\"},{\"id\":\"Placement\",\"type\":\"textbox\",\"label\":\"Placement\",\"valueBinding\": function(m, log) { var ds = m.dataSources.getInitiatorByName; if (this.value != \"\") { return this.value; } else if (ds && ds.length > 0) { var placement = (ds[0].Place || \"\"); return placement; } return this.value; },\"caseBinding\":\"place\",\"caseBindingBehaviour\":\"newonly\"},{\"id\":\"OrdererCode\",\"type\":\"textbox\",\"label\":\"Orderer Code\",\"valueBinding\": function(m, log) { var ds = m.dataSources.getInitiatorByName; if (this.value != \"\") { return this.value; } else if (ds && ds.length > 0) { var userCode = (ds[0].UserCode || \"\"); return userCode; } return this.value; },\"caseBinding\":\"usercode\",\"caseBindingBehaviour\":\"newonly\"}]},{\"id\":\"HiddenFields\",\"name\":\"Hidden fields\",\"hiddenBinding\": function(m, log) { return true; },\"controls\":[{\"id\":\"customerGuid\",\"type\":\"textbox\",\"valueBinding\": function(m, log) { return \"" + customerGuid + "\"; }},{\"id\":\"currentUser\",\"type\":\"textbox\",\"valueBinding\": function(m, log) { if (!m.formInfo.currentUser) return \"\"; if (!m.formInfo.caseId) return m.formInfo.currentUser; }}";
        }
    }
}
