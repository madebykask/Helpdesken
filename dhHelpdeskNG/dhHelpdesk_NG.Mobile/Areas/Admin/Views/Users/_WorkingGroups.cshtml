@using DH.Helpdesk.Web.Infrastructure
@model DH.Helpdesk.Web.Areas.Admin.Models.UserInputViewModel
<div class="container">
    
                <table class="tableform">
                    <thead>
                        <tr>
                            <th class="span3">
                                @Translation.Get("Kund", Enums.TranslationSource.TextTranslation)
                            </th>
                            <th class="span3">
                                @Translation.Get("Driftgrupp", Enums.TranslationSource.TextTranslation)
                            </th>
                            <th class="span3">
                                @Translation.Get("Handläggarrättighet", Enums.TranslationSource.TextTranslation)
                            </th>
                            <th class="span3">
                                @Translation.Get("Läsrättighet", Enums.TranslationSource.TextTranslation)
                            </th>
                            <th class="span3">
                                @Translation.Get("Standard", Enums.TranslationSource.TextTranslation)
                            </th>
                        </tr>
                    </thead>
                    @{ var customername=""; }
                    @{ var i = 0; }
                    @foreach (var uwg in Model.ListWorkingGroupsForUser)
                        {
            
                            <tr>
                                <td>
                                    @if (customername != uwg.CustomerName)
                                    {    
                                        @uwg.CustomerName
                                    }
                                </td>
                                <td>
                                    @Translation.Get(uwg.WorkingGroupName, Enums.TranslationSource.TextTranslation)
                                </td>
                                <td>
                                    <input type="checkbox" name="@string.Format("UserWorkingGroups[{0}].UserRole", i)" id="UserWorkingGroup_[@i]_2" @(uwg.RoleToUWG == 2 ? "checked=checked" : "")  class="userRole" value="2" />
                                    <input type="hidden" name="@string.Format("UserWorkingGroups[{0}].User_Id", i)" value="@uwg.User_Id" />
                                    <input type="hidden" name="@string.Format("UserWorkingGroups[{0}].WorkingGroup_Id", i)" value="@uwg.WorkingGroup_Id" />
                                </td>
                                <td>
                                    <input type="checkbox" name="@string.Format("UserWorkingGroups[{0}].UserRole", i)" id="UserWorkingGroup_[@i]_1" @(uwg.RoleToUWG == 1 ? "checked=checked" : "") class="userRole" value="1" />
                                </td>
                                <td>
                                    <input type="radio" name="User.Default_WorkingGroup_Id" value="@uwg.WorkingGroup_Id" @(uwg.IsStandard == uwg.WorkingGroup_Id ? "checked=checked" : "") />
                                </td>            
                            </tr>   
                            customername = uwg.CustomerName;
                            i++;
                        }
                </table>
</div>
<script type="text/javascript">

    $(function () {
        $('.userRole').change(function () {
            var t = $(this);

            var id = t.attr('id');

            if (id.substring(id.length - 1) == '1' && document.getElementById(id).checked == true) {
                var c = id.substring(0, id.length - 1) + '2';

                document.getElementById(c).checked = false;
            }
            if (id.substring(id.length - 1) == '2' && document.getElementById(id).checked == true) {
                var c = id.substring(0, id.length - 1) + '1';

                document.getElementById(c).checked = false;
            }
        });
    });


</script>
