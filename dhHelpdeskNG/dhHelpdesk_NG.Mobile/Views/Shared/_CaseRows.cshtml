
@using DH.Helpdesk.Common.Extensions.DateTime
@using DH.Helpdesk.Mobile.Infrastructure.Extensions
@model DH.Helpdesk.Mobile.Models.Case.CaseSearchResultModel

@if (Model != null)
{    
    <table class="table table-striped table-bordered table-hover">
        <thead>
            <tr>
                <!--fasta kolumner -->
                
                <!-- valbara kolumner -->
                @if (Model.caseSettings != null)
                {                                        
                    <th onclick="sortCases('@Model.caseSettings[0].Name')" class="thpointer" >
                        @Translation.Get(Model.caseSettings[0].Name, Enums.TranslationSource.CaseTranslation, Model.caseSettings[0].Customer_Id) - 
                        @Translation.Get(Model.caseSettings[1].Name, Enums.TranslationSource.CaseTranslation, Model.caseSettings[1].Customer_Id)
                        <i class="@Model.caseSettings[0].Name.SetCaseSortIcon()"></i>                                
                    </th>                                        
                }
            </tr>
        </thead>        
        <tbody>
            @if (Model.cases.Any())
            {            
                foreach (var r in Model.cases)
                {
                <tr title="@r.Tooltip" class="@r.IsUnread.GetClassForCaseRowTr(@r.IsUrgent)">
                    <!--fasta kolumner -->
                
                    <!-- valbara kolumner -->
                    <td>
                    @foreach (var c in r.Columns)
                    {                           
                        if (c.FieldType == 1)
                        {
                            <!-- date -->
                            <a href="@Url.Action("edit", "cases", new { area = "", id = r.Id })">@Html.DisplayFor(m => c.DateTimeValue, "Date")&nbsp;&nbsp;</a>
                        }
                        else if (c.FieldType == 2)                                                        
                        {
                            <!-- dateTime -->
                            <a href="@Url.Action("edit", "cases", new { area = "", id = r.Id })">@(c.DateTimeValue.HasValue ? c.DateTimeValue.Value.ToLocalTime().ToFormattedDateTime() : string.Empty)&nbsp;&nbsp;</a>
                        }
                        else    
                        {
                            if (c.TranslateThis)
                            {
                                <!-- string -->
                                <a href="@Url.Action("edit", "cases", new { area = "", id = r.Id })">@Translation.Get(c.StringValue, Enums.TranslationSource.TextTranslation)&nbsp;&nbsp;</a>
                            }
                            else    
                            {
                                <a href="@Url.Action("edit", "cases", new { area = "", id = r.Id })">@c.StringValue &nbsp;&nbsp;</a>
                            }
                        }
                  
                    }    
                    </td>
                </tr>                
                }
            }
            else
            {
                @Html.Partial("_NoHits", "")
            }
        </tbody>
    </table>
}
