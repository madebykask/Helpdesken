@model DH.Helpdesk.Web.Models.Case.CaseInputViewModel
@using DH.Helpdesk.Web.Infrastructure

@section Scripts {
<script type="text/javascript">

     $(document).ready(function () {
         CaseInitForm();
     });

</script>
}

@Html.Partial("_Plupload")
<div id="divSendToDialog" role="dialog" class="modal hide fade" aria-labelledby="myModalLabelSendTo" aria-hidden="true" >
    @Html.Partial("SendToDialog", Model.SendToDialogModel)
</div>

@if (Model != null)
{
    using (Html.BeginForm("edit", "cases", null, FormMethod.Post, new { id = "target" }))
    {    
    <div class="secnavs">
        <div class="pull-left">
            <ul class="secnav">
                @if (!Model.case_.FinishingDate.HasValue && Model.CaseIsLockedByUserId == 0)
                {
                    <li>@Html.ActionLink(Translation.Get("Spara", Enums.TranslationSource.TextTranslation), null, null, null, new { onclick = "$('#target').submit();return false;", @class = "btn" })</li>
                    <li>@Html.ActionLink(Translation.Get("Spara och stäng", Enums.TranslationSource.TextTranslation), null, null, new { onclick = "EditCaseAndClose();return false;", @class = "btn" })</li>
                    <li>@Html.ActionLink(Translation.Get("Spara", Enums.TranslationSource.TextTranslation) + "/" + Translation.Get("Nytt ärende", Enums.TranslationSource.TextTranslation), null, null, new { onclick = "EditCaseAndAddCase();return false;", @class = "btn" })</li>
                    <li class="secspace"></li>
                    <li>@Html.ActionLink(Translation.Get("Ta bort", Enums.TranslationSource.TextTranslation), "DeleteCase", new { caseId = @Model.case_.Id, customerId = @Model.case_.Customer_Id }, new { @class = "btn deleteDialog", deleteDialogText = Translation.Get("Är du säker på att du vill ta bort aktuellt ärende och tillhörande loggposter", Enums.TranslationSource.TextTranslation) })</li>
                }
                <li>@Html.ActionLink(Translation.Get("Avbryt", Enums.TranslationSource.TextTranslation), "Index", new { customerId = @Model.case_.Customer_Id }, new { @class = "btn" })</li>
                <li>
                    <!--
                    <div class="btn-group">
                        <button class="btn">@Translation.Get("Åtgärder", Enums.TranslationSource.TextTranslation)</button>
                        <button class="btn dropdown-toggle" data-toggle="dropdown">
                            <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu">
                            <li><a href="#">@Translation.Get("Kopiera", Enums.TranslationSource.TextTranslation)</a></li>
                        </ul>
                    </div>
                    -->
                </li>
            </ul>
        </div>
        <div class="pull-right">
            <!--
            <ul class="secnav">
                <li><a href="#" class="btn"><i class="icon-file"></i></a></li>
                <li><a href="#" class="btn"><i class="icon-th-large"></i></a></li>
                <li><a href="#" class="btn"><i class="icon-list"></i></a></li>
                <li><a href="#" class="btn"><i class="icon-chevron-left"></i></a></li>
                <li><a href="#" class="btn"><i class="icon-chevron-right"></i></a></li>
            </ul>
            -->
        </div>
    </div>
    <div class="secnavs">
        <div class="pull-left">
            <ul class="secnav">
                <!--
                <li>
                    <select class="span1">
                        <option>SV</option>
                        <option>EN</option>
                    </select>
                </li>
                <li class="secspace"></li>
                -->
                <li>
                    <label class="checkbox">
                        @Html.CheckBoxFor(model => model.CaseMailSetting.DontSendMailToNotifier) @Translation.Get("Skicka ej mail till anmälaren", Enums.TranslationSource.TextTranslation)
                    </label>
                </li>
            </ul>
        </div>
    </div>
    @Html.Partial("_Input", Model)
    }
}

