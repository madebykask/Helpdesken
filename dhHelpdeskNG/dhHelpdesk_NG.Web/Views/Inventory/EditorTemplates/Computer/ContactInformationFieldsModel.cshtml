@model DH.Helpdesk.Web.Models.Inventory.EditModel.Computer.ContactInformationFieldsModel
@{
    
    if (!ViewData.ContainsKey("ComputerId"))
    {
        throw new ArgumentNullException("ComputerId", "\"ComputerId\" ViewData parameter must be specified.");
    }

    var computerId = ViewData["ComputerId"];
}

<script>
    $(function () {
        $('#user_dialog_button').button().click(function () {
            var value = $("#user_dialog_textbox").val();

            if (!value) {
                return;
            }

            $.get('@Url.Action("SearchComputerUsers")', { selected: value }, function (data) {
                $("#user_dialog_container").html(data);
                $("#user_select_div").parent().appendTo("#user_dialog_container");
                $('#user_select_div').dialog('open');
            });
        });

        $('#history_dialog_button').button().click(function () {

            $.get('@Url.Action("SearchComputerUserHistory")', { computerId: '@computerId' }, function (data) {
                $("#user_history_dialog_container").html(data);
                $("#user_history_select_div").parent().appendTo("#user_history_dialog_container");
                $('#user_history_select_div').dialog('open');
            });
        });

    });
</script>
<table class="tableform">
    @if (Model.UserStringId.Show)
    {
        <tr>
            <th colspan="4" class="header">@Translation.Get("Användarinformation")</th>
        </tr>
        @Html.EditorFor(m => m.UserStringId, "Fields/Text", new { inputAttributes = new Dictionary<string, object> { { "id", "user_dialog_textbox" } } })
        <tr>
            <td class="span3"></td>
            <td class="span9">
                @if (!Model.UserStringId.IsReadOnly)
                {
                    <input type="button" class="btn" id="user_dialog_button" value="@Translation.Get("Sök")" />
                    <input type="button" class="btn" id="history_dialog_button" value="@Translation.Get("Historik")" />
                }
            </td>
        </tr>
        <tr>
            <td class="span3">
                <label>@Translation.Get("Förnamn")</label>
            </td>
            <td class="span9" id="firstname_dialog_td">
                @Html.DisplayFor(m => m.UserName.FirstName)
            </td>
        </tr>
        <tr>
            <td class="span3">
                <label>@Translation.Get("Efternamn")</label>
            </td>
            <td class="span9" id="surname_dialog_td">
                @Html.DisplayFor(m => m.UserName.LastName)
            </td>
        </tr>
        <tr>
            <td class="span3">
                <label>@Translation.Get("Avdelning")</label>
            </td>
            <td class="span9" id="department_dialog_td">
                @Html.DisplayFor(m => m.Department)
            </td>
        </tr>
        <tr>
            <td class="span3">
                <label>@Translation.Get("Enhet")</label>
            </td>
            <td class="span9" id="unit_dialog_td">
                @Html.DisplayFor(m => m.Unit)
            </td>
        </tr>
    }
</table>
@Html.HiddenFor(x => x.UserId, new { id = "user_dialog_userId" })
<div id="user_dialog_container">
</div>
<div id="user_history_dialog_container">
</div>
