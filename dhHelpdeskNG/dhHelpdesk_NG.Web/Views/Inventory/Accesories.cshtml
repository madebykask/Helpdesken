@using DH.Helpdesk.Web.Models.Inventory
@model DH.Helpdesk.Web.Models.Inventory.EditModel.Computer.AccesoriesViewModel 
<script>
    $(function () {
        $('#inventory_types_dropdown').change(function () {
            var selectedValue = $(this).val();
            $.get('@Url.Action("SearchNotConnectedInventory")', { selected: selectedValue, computerId: '@Model.ComputerId' }, function (json) {

                var sel = $('#inventories_dropdown');
                sel.empty();
                for (var i = 0; i < json.length; i++) {
                    var e = json[i];
                    $('<option>').text(e.Name).val(e.Value).appendTo(sel);
                }

                if ($('#inventories_dropdown').val() == null) {
                    $('#inventory_button').hide();
                } else {
                    $('#inventory_button').show();
                }
            });
        });
    });
</script>
<table>
    @{
        foreach (var model in Model.InventoryGridModels)
        {
            @Translation.Get(model.CurrentModeName)
            @Html.Partial("InventoryGridWithDeleteButton", new InventoryGridModelForDynamicInventory(model, Model.ComputerId))
        }
    }
</table>
@Translation.Get("Lägg till")
<div>
    @Html.DropDownListFor(x => x.InventoryTypeId, Model.InventoryTypes, new { id = "inventory_types_dropdown" })
</div>
@using (Html.BeginForm("ConnectInventoryToComputer", "Inventory", new { computerId = Model.ComputerId }, FormMethod.Post, new { id = "log_edit_form" }))
{
    @Html.DropDownListFor(x => x.InventoryId, Model.Inventories, new { id = "inventories_dropdown" })
    <input type="submit" value="@Translation.Get("Lägg till")" class="btn" id="inventory_button" />
}
