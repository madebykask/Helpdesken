@model DH.Helpdesk.Web.Models.Inventory.SearchModels.InstaledProgramsReportSearchViewModel
@using DH.Helpdesk.Web.Enums.Inventory
@{
    const int ServerId = (int)@ReportDataTypes.Server;
}

<script>
    $(function () {

        $('input[name="ReportDataType"]').click(function () {
            var selected = $(this).val();

            if (selected == '@ServerId') {
                $('#departments_tr').hide();
                $('#departments_tr input').disable = true;
            } else {
                $('#departments_tr').show();
                $('#departments_tr input').disable = false;
            }
        });

    });
</script>

@using (Ajax.BeginForm("InstaledProgramsReportGrid", null, new AjaxOptions { UpdateTargetId = "report_grid_container" }, new { id = "report_search_form" }))
{
    <table class="tableform">
        <tr id="departments_tr">
            <td class="span3">@Translation.Get("Avdelning")</td>
            <td>@Html.DropDownListFor(m => m.Filter.DepartmentId, Model.Departments, string.Empty, new { id = "departments_drop_down" })</td>
        </tr>
        <tr>
            <td class="span3">
                @Html.LabelFor(m => m.Filter.SearchFor)
            </td>
            <td>
                @Html.TextBoxFor(m => m.Filter.SearchFor)
            </td>
        </tr>
        <tr id="reports_data_switch_tr">
            <td>@Translation.Get("Typ")
            </td>
            <td>
                @Translation.Get("Arbetsstationer")
                @Html.RadioButton("Filter.ReportDataType", 1, Model.Filter.ReportDataType == ReportDataTypes.Workstation, new { id = "show_workstation_radio_button" })

                @Translation.Get("Server")
                @Html.RadioButton("Filter.ReportDataType", 2, Model.Filter.ReportDataType == ReportDataTypes.Server, new { id = "show_server_radio_button" })

                @Translation.Get("Alla")
                @Html.RadioButton("Filter.ReportDataType", 3, Model.Filter.ReportDataType == ReportDataTypes.All, new { id = "show_all_radio_button" })
            </td>
        </tr>
        <tr id="inventory_tr">
            <td>@Translation.Get("Visa")
            </td>
            <td>
                @Translation.Get("Inventarie")
                @Html.CheckBoxFor(x => x.Filter.IsShowParentInventory)
            </td>
        </tr>
        <tr id="missing_inventory_tr">
            <td></td>
            <td>
                @Translation.Get("Inventarier som saknar listade program")
                @Html.CheckBoxFor(x => x.Filter.IsShowMissingParentInventory)
            </td>
        </tr>
        <tr>
            <td class="span3">&nbsp;
            </td>
            <td>
                <input type="submit" value="@Translation.Get("Sök")" class="btn" />
            </td>
        </tr>
    </table>
}
<div id="report_grid_container">
    @Html.Action("InstaledProgramsReportGrid", "Inventory", new { area = string.Empty, filter = Model.Filter })
</div>
