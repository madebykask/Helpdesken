@using DH.Helpdesk.Web.Infrastructure
@using DH.Helpdesk.Web.Infrastructure.Extensions
@model DH.Helpdesk.Web.Models.DailyReports.DailyReportOutputModel



@{
    ViewBag.Title = "Index"; 
}

@using (Html.BeginForm("Update", "DailyReport", FormMethod.Get, new { id = "target" }))  
{
   
    <div class="secnavs fixed">
        <div class="pull-left">    
            <ul class="secnav">
                <li>@Html.ActionLink(Translation.Get("Spara", Enums.TranslationSource.TextTranslation), "new", null, new { onclick = "submitForm();return false;", @class = "btn" })</li>
               @*<li>              
               @Html.ActionLink(Translation.Get("Spara", Enums.TranslationSource.TextTranslation), "update", new { dailyReportModel = Model}, new { @class = "btn" })
                @Html.ActionLink(Translation.Get("Spara", Enums.TranslationSource.TextTranslation), "update", null, new { onclick = "submitForm();return false;", @class = "btn" })
                   
                   <input type="button" onclick="submitForm()" value="@Translation.Get("Spara", Enums.TranslationSource.TextTranslation)" class="btn"/>                 
               </li>*@

            </ul>
        </div>
    </div>
    <div class="content">
        <div class="container">
            <ul class="nav nav-tabs" id="myTab">
                <li id="DailyTab" class="active">
                    <a href="#fragment-1">@Translation.Get("Daily Report, "+ System.DateTime.Now.ToShortDateString() , Enums.TranslationSource.TextTranslation)</a>
                </li>
                <li id="HistoryTab">
                    <a href="#fragment-2">@Translation.Get("Historik", Enums.TranslationSource.TextTranslation)</a>
                </li>
            </ul>
            <div class="tab-content">
                <div class="tab-pane tab-pane-border active" id="fragment-1">                                                       
                        <div class="container">
                            <div class="row">                        
                                <div class="span100">
                                    <table class="table table-bordered">
                                        <thead>
                                            <tr>
                                                <th>
                                                    @Translation.Get("Sent", Enums.TranslationSource.TextTranslation)
                                                </th>
                                                <th>
                                                    @Translation.Get("Created By", Enums.TranslationSource.TextTranslation)
                                                </th>
                                                <th>
                                                    @Translation.Get("Subject", Enums.TranslationSource.TextTranslation)
                                                </th>
                                                <th colspan="2">
                                                    @Translation.Get("Text", Enums.TranslationSource.TextTranslation)
                                                </th>                                                                                      
                                            </tr>
                                        </thead>
                                        <tbody>

                                            @foreach (var item in Model.Reports)
                                            {
                                             <tr>
                                                <td style="width:5%">                                                
                                                
                                                </td>                                            
                                                <td style="width:10%">
                                                    @SessionFacade.CurrentUser.UserId
                                                </td>
                                                <td style="width:13%">
                                                    <select id="lstNewSubjectList" name="lstNewSubjectList"  class="valid">
                                                        <option value=""></option>
                                                        @foreach (var e in Model.Subjects)
                                                        {                                                                                                                                       
                                                           <option value="@e.Id">@e.Subject</option>                                                      
                                                        }
                                                    </select>
                                               
                                                </td>
                                                <td colspan="2" style="width:60%">                                                                                                  
                                                    <textarea></textarea>
                                                </td>
                                           
                                            </tr>

                                            
                                            <tr>
                                                <td style="width:5%">                                                
                                                    @item.Sent.IntToYES_NO()                                                
                                                </td>                                            
                                                <td style="width:10%">
                                                    @Html.DisplayFor(modelitem => item.UserName)
                                                </td>
                                                <td style="width:13%">                                                
                                                    <select id="lstSubjectList" name="lstSubjectList"  class="valid">
                                                        @foreach (var e in Model.Subjects)
                                                        {                                                                               
                                                           <option value="@e.Id" @(e.Id ==item.DailyReportSubject.Id? "selected":"")>@e.Subject</option>                                                      
                                                        }

                                                    </select>
                                                </td>
                                                <td style="width:60%">             
                                                    @Html.TextAreaFor(m=> item.DailyReportText)
                                                    
                                                    @*<textarea> @item.DailyReportText</textarea>                                                                                               *@
                                                </td>
                                                <td style="width:5%;border-left-style: none;vertical-align:middle" >                                                                                                                                                                                                                                                                       
                                                  @Html.ActionLink(Translation.Get("Ta bort", Enums.TranslationSource.TextTranslation), "delete",
                                                      new { id = item.Id}, new { @class = "btn deleteDialog", deleteDialogText = Translation.Get("Är du säker på att du vill ta bort aktuell post" , Enums.TranslationSource.TextTranslation) + "?"})
                                                </td>
                                            </tr>
                                            }
                                             @Html.HiddenFor( item => Model.Reports)
                                        </tbody>
                                    </table>
                                </div>
                            
                                <div class="">
                                    @*@this.Html.Partial("_DocumentListOverview", Model)*@
                                </div>
                            </div>
                        </div>                
                </div>

                <div class="tab-pane tab-pane-border" id="fragment-2">
                    <table class="table table-striped table-bordered table-hover" id="tbldocumentCategory">
                        <thead>
                            <tr>
                                <th>
                                    Test1
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            @*@foreach (var items in Model.DocumentCategories)
                            {
                                *@
                                <tr>
                                    <td>
                                        @*<a href="@Url.Action("editcategory", "document", new { id = items.Id })">@Html.DisplayFor(modelItem => items.Name)</a>*@
                                        value1
                                    </td>
                                </tr>
                            @*}*@
                        </tbody>
                    </table>
                </div>            
            </div>
        </div>
    </div>
}

<script type="text/javascript">

    function submitForm() {        
        $("#target").submit();
    }

</script>