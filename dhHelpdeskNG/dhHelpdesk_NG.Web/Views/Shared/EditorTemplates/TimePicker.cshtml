
@model DateTime?

@{
    var controlId = ViewData["Id"];
    if (controlId == null)
    {
        throw new ArgumentNullException("id", "id must be specified.");
    }

    var inputAttributes = (Dictionary<string, object>)ViewData["inputAttributes"];
    var htmlAttributes = new Dictionary<string, object>(inputAttributes.Count + 2);

    foreach (var inputAttribute in inputAttributes)
    {
        htmlAttributes.Add(inputAttribute.Key, inputAttribute.Value);
    }

    htmlAttributes.Add("id", controlId);
    htmlAttributes.Add("class", "input-small");

    string time = null;

    if (Model.HasValue)
    {
        time = Model.Value.ToString("HH:mm");
    }
}

<script type="text/javascript">
    $(function() {
        $('#@controlId').timepicker({
            showMeridian: false,
            minuteStep: 1
        });
    });
</script>

<div class="input-append bootstrap-timepicker">
    @Html.TextBox(string.Empty, time, htmlAttributes)
    <span class="add-on">
        <i class="icon-time"></i>
    </span>
</div>