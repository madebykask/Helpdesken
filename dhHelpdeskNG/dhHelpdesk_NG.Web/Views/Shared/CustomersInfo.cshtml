@model DH.Helpdesk.Web.Models.Customers.CustomersInfoViewModel

@using (Html.BeginForm("index", "home", FormMethod.Post, new { id = "search" }))
{
    <table class="table table-striped table-bordered table-hover">
        <thead>
            <tr>
                <th>
                    @Translation.Get("Kund", Enums.TranslationSource.TextTranslation)
                </th>
            </tr>
        </thead>
        <tbody>
            <tr>
                @if (Model != null)
                {                                                
                    foreach (var cs in Model.CustomerUsersForStart)
                    {     
                        <tr>
                            <td>
                                <a href="@Url.Action("index", "cases", new { customerId = cs.Customer_Id })">
                                    @Html.DisplayFor(modelItem => cs.Customer.Name)
                                </a>
                                <a href="@Url.Action("index", "cases", new { customerId = cs.Customer_Id })" 
                                   class="start-tile label my" 
                                   rel="tooltip" 
                                   data-toggle="tooltip" 
                                   title="@Translation.Get("Mina ärenden", Enums.TranslationSource.TextTranslation)">
                                    @Model.Cases.Count(x => x.FinishingDate == null && x.Customer_Id == cs.Customer_Id && x.Performer_User_Id == 2)
                                </a>
                                <a href="@Url.Action("index", "cases", new { customerId = cs.Customer_Id })" 
                                   rel="tooltip" class="start-tile label inrest" 
                                   title="@Translation.Get("Vilande ärenden", Enums.TranslationSource.TextTranslation)">
                                    @Model.Cases.Count(x => x.FinishingDate == null && x.StateSecondary_Id != null && x.Customer_Id == cs.Customer_Id)
                                </a> 
                                <a href="@Url.Action("index", "cases", new { customerId = cs.Customer_Id })" 
                                   rel="tooltip" 
                                   class="start-tile label closed" 
                                   title="@Translation.Get("Avslutade ärenden", Enums.TranslationSource.TextTranslation)">
                                    @Model.Cases.Count(x => x.FinishingDate != null && x.Customer_Id == cs.Customer_Id)
                                </a> 
                                <a href="@Url.Action("index", "cases", new { customerId = cs.Customer_Id })" 
                                   rel="tooltip" 
                                   class="start-tile label unread" 
                                   title="@Translation.Get("Pågående ärenden", Enums.TranslationSource.TextTranslation) (@Translation.Get("Olästa ärenden", Enums.TranslationSource.TextTranslation))">
                                    @Model.Cases.Count(x => x.FinishingDate == null && x.Customer_Id == cs.Customer_Id)
                                </a>
                            </td>
                        </tr>
                    }
                }                                                
        </tbody>
    </table>
}
