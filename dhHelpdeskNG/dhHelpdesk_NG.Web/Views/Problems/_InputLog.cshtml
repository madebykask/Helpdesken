@using DH.Helpdesk.Web.Infrastructure.Extensions.HtmlHelperExtensions
@model DH.Helpdesk.Web.Models.Problem.LogEditModel
@{
    ViewBag.Title = "_InputLog";
}

@if (ViewContext.FormContext == null)
{
    ViewContext.FormContext = new FormContext();
}

<div class="container">
    <h4>@Translation.Get("Loggpost", Enums.TranslationSource.TextTranslation)</h4>
    <div class="row">
        <div class="span12">
            <table>
                <tr>
                    <td class="span3">@Translation.Get("Loggtext", Enums.TranslationSource.TextTranslation)
                    </td>
                    <td class="span9">
                        @Html.TextAreaFor(x => x.LogText)
                        @Html.ValidationMessageFor(x => x.LogText)
                    </td>
                </tr>
                <tr>
                    <td>@Translation.Get("Visa i ärendelogg som", Enums.TranslationSource.TextTranslation)
                    </td>
                    <td>
                        @Html.CheckBoxFor(x => x.InternNotering, new { id = "notering_intern_checkBox" })
                        @Translation.Get("Intern notering", Enums.TranslationSource.TextTranslation)
                        @Html.CheckBoxFor(x => x.ExternNotering, new { id = "notering_extern_checkBox" })
                        @Translation.Get("Extern notering", Enums.TranslationSource.TextTranslation)
                    </td>
                </tr>
                <tr>
                    <td>@Translation.Get("Avslutsorsak", Enums.TranslationSource.TextTranslation)
                    </td>
                    <td>
                        @Html.DropDownWithSubmenus("causes_dropdown", "FinishingCauseId", true, Model.FinishingCauses)
                    </td>
                </tr>
                <tr>
                    <td>
                        @Translation.Get("Avslutsdatum", Enums.TranslationSource.TextTranslation)
                    </td>
                    <td>
                        @Html.EditorFor(m => m.FinishingDate, "DatePicker", new { id = "finishing_date_datepicker" })
                    </td>
                </tr>
                <tr>
                    <td>@Translation.Get("Kopplade ärenden", Enums.TranslationSource.TextTranslation)
                    </td>
                    <td>
                        @Html.CheckBoxFor(x => x.FinishConnectedCases)
                        @Translation.Get("Avsluta kopplade ärenden", Enums.TranslationSource.TextTranslation)
                    </td>
                </tr>
            </table>
            @Html.HiddenFor(x => x.Id)
        </div>
    </div>
</div>

<script>
    $("input:checkbox[id*='notering']").click(function () {
        $("input:checkbox[id*='notering']").not(this).attr("checked", false);
    });
</script>
