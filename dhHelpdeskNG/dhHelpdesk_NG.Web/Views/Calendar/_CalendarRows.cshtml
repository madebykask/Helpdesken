@using DH.Helpdesk.Web.Infrastructure.Extensions
@model IEnumerable<DH.Helpdesk.BusinessData.Models.Calendar.Output.CalendarOverview>

@{var CurIcon = "";}
                       
<table class="table table-striped table-bordered table-hover" id="tblcalendar">    
    <thead>             
        <tr>                
            <th sort-data="CalendarDate" style="cursor: pointer; cursor: hand">
                @Translation.Get("Datum")                                  
                @{CurIcon = "CalendarDate";}                
                <i class="@CurIcon.SetCalendarSortIcon()"></i>
            </th>           
            <th sort-data="ShowUntilDate"   style="cursor: pointer; cursor: hand">
                @Translation.Get("Visa t.o.m")                                
                @{CurIcon = "ShowUntilDate";}
                <i class="@CurIcon.SetCalendarSortIcon()"></i>                
            </th>
            <th sort-data="Caption" style="cursor: pointer; cursor: hand">
                @Translation.Get("Rubrik")               
                @{CurIcon = "Caption";}
                <i class="@CurIcon.SetCalendarSortIcon()"></i>                                
            </th>
            <th sort-data="Text" style="cursor: pointer; cursor: hand">
                @Translation.Get("Text")           
                @{CurIcon = "Text";}
                <i class="@CurIcon.SetCalendarSortIcon()"></i>                               
            </th>
            <th sort-data="ShowOnStartPage" style="cursor: pointer; cursor: hand">
                @Translation.Get("Visa på startsidan")                
                @{CurIcon = "ShowOnStartPage";}
                <i class="@CurIcon.SetCalendarSortIcon()"></i>                
            </th>
            <th sort-data="PublicInformation" style="cursor: pointer; cursor: hand">
                @Translation.Get("Självservice")                
                @{CurIcon = "PublicInformation";}
                <i class="@CurIcon.SetCalendarSortIcon()"></i>                               
            </th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {                               
            <tr>
                <td>
                    <a href="@Url.Action("edit", "calendar", new { id = item.Id })">@Html.DisplayFor(modelItem => item.CalendarDate, "Date")</a>
                </td>
                <td>
                    <a href="@Url.Action("edit", "calendar", new { id = item.Id })">@Html.DisplayFor(modelItem => item.ShowUntilDate , "Date")</a>
                </td>
                <td>
                    <a href="@Url.Action("edit", "calendar", new { id = item.Id })">@Html.DisplayFor(modelItem => item.Caption)</a>
                </td>
                <td>
                    <a href="@Url.Action("edit", "calendar", new { id = item.Id })">@Html.DisplayFor(modelItem => item.Text)</a>
                </td>
                <td>
                    <a href="@Url.Action("edit", "calendar", new { id = item.Id })">@Translation.Get(item.ShowOnStartPage.BoolToYesNo())</a>
                </td>
                <td>
                    <a href="@Url.Action("edit", "calendar", new { id = item.Id })">@Translation.Get(item.PublicInformation.BoolToYesNo())</a>
                </td>
            </tr>
        }
    </tbody>
</table>
     
<script type="text/javascript">

    $(document).on('click', 'th', function (e) {
        var sortBy = $(this).attr('sort-data');
        $.post("/Calendar/Sort", { fieldName: sortBy });
        $("#search").submit();

    });

    //$(document).on('click', 'th', function (e) {        
    //    var sortBy = $(this).attr('sort-data');                
    //    $.ajax({
    //        url: 'Calendar/Sort/?FieldName=' + sortBy,
    //        type: 'POST'           
    //    });       
    //});       

</script>
