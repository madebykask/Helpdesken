@using System.Web.Optimization
@using DH.Helpdesk.Web.Infrastructure
@model DH.Helpdesk.Web.Areas.Reports.Models.Options.ReportsOptions
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="secnavs fixed">
    <div class="pull-left">
        <ul class="secnav">
            <li>
                <a id="showReport" class="btn">@Translation.Get("Visa")</a>  
                <img id="showReportLoader" src="@Url.Content("~/Content/icons/ajax-loader.gif")" style="display: none;" />              
            </li>
            <li>
                <a id="printReport" class="btn">@Translation.Get("Skriv ut")</a>                
            </li>
            <li>
                <a id="excelReport" class="btn">@Translation.Get("Export to Excel")</a>                
            </li>
        </ul>
    </div>
</div>
<div class="content report-page">
    <div class="container">
        <ul class="nav nav-tabs">
            <li class="active">
                <a href="#fragment-1">@Translation.Get("Rapporter")</a>
            </li>
        </ul>        
        <div class="tab-content overflow-visible">
            <div id="fragment-1" class="tab-pane tab-pane-border active">
                @using (Ajax.BeginForm("GetReportOptions", "Report", null,
                    new AjaxOptions { UpdateTargetId = "reportContent", OnComplete = "onLoadOptions" }, new { id = "getReportOptionsForm" }))
                {
                    <table class="tableform">    
                        <tr>
                            <td class="span3">@Translation.Get("Rapport")</td>
                            <td>@Html.DropDownListFor(m => m.ReportId, Model.Reports)</td>
                        </tr>        
                    </table>        
                }                
                <div id="reportContent">
                </div>
            </div>
        </div>
    </div>
</div>

@Scripts.Render("~/bundles/report")

<script type="text/javascript">
    var scope;

    $(function() {
        scope = dhHelpdesk.reports.scope({
            workingGroupUsersRoute: '@Url.Action("GetWorkingGroupUsers", "Services", new { area = "reports" })'
        });
    });

    function onLoadOptions() {
        scope.onLoadOptions();
    }
</script>

