@using DH.Helpdesk.Web.Infrastructure
@using DH.Helpdesk.Web.Infrastructure.Extensions
@model DH.Helpdesk.Web.Areas.Admin.Models.CaseTypeInputViewModel

<div class="content">
    <div class="container">
        <ul class="nav nav-tabs" id="myTab">
            <li class="active"><a href="#fragment-1">@Translation.Get("Ärendetyp", Enums.TranslationSource.TextTranslation) - @Model.Customer.Name</a></li>
        </ul>
        <div class="tab-content">
            <div class="tab-pane tab-pane-border active" id="fragment1">
                <div class="container">
                    @if (TempData["Error"] != null)
                    {
                        <div class="alert alert-error">@Translation.Get("Ärendetyp", Enums.TranslationSource.TextTranslation)
                            @Translation.Get("som används går inte att ta bort", Enums.TranslationSource.TextTranslation)
                        </div>    
                    }
                    <h4>@Translation.Get("Allmänt", Enums.TranslationSource.TextTranslation)</h4>
                    <div class="row">
                        <div class="span12">
                            <table class="tableform">
                                <tr>
                                    <td class="span3">
                                        @Translation.Get("Ärendetyp", Enums.TranslationSource.TextTranslation)
                                    </td>
                                    <td class="span9">
                                        @Html.TextBoxFor(model => model.CaseType.Name, new { maxlength = "50" })
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        @Translation.Get("Standard", Enums.TranslationSource.TextTranslation)
                                    </td>
                                    <td><label class="checkbox">
                                        <input type="checkbox" name="casetype.IsDefault" @(Model.CaseType.IsDefault == 1 ? "checked=checked" : "") value="1"/>
                                        <input type="hidden" name="casetype.IsDefault" value="0" />
                                        &nbsp;@Translation.Get("Använd ärendetypen som standard vid ärenderegistrering", Enums.TranslationSource.TextTranslation)
                                        </label>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        &nbsp;
                                    </td>
                                    <td><label class="checkbox">
                                        <input type="checkbox" name="casetype.IsEMailDefault" @(Model.CaseType.IsEMailDefault == 1 ? "checked=checked" : "") value="1"/>
                                        <input type="hidden" name="casetype.IsEMailDefault" value="0" />
                                        &nbsp;@Translation.Get("Standard vid ärenderegistrering via e-post", Enums.TranslationSource.TextTranslation)
                                        </label>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        @Translation.Get("Godkännande", Enums.TranslationSource.TextTranslation)
                                    </td>
                                    <td><label class="checkbox">
                                        <input type="checkbox" name="casetype.RequireApproving" @(Model.CaseType.RequireApproving == 1 ? "checked=checked" : "") value="1"/>
                                        <input type="hidden" name="casetype.RequireApproving" value="0" />
                                        &nbsp;@Translation.Get("Ärenden med aktuell ärendetyp kräver godkännande", Enums.TranslationSource.TextTranslation)
                                        </label>
                                        @Translation.Get("Godkänn ärenden automatiskt efter", Enums.TranslationSource.TextTranslation)&nbsp;
                                        @Html.TextBoxFor(model => model.CaseType.AutomaticApproveTime, new { style = "display: inline; width: 30px; text-align: right; margin-left:0;", maxlength = "3" })
                                        &nbsp;@Translation.Get("timmar", Enums.TranslationSource.TextTranslation)
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        @Translation.Get("Handläggare", Enums.TranslationSource.TextTranslation)
                                    </td>
                                    <td>
                                        @Html.DropDownListFor(model => model.CaseType.User_Id, Model.SystemOwners, "")
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        @Translation.Get("Visa", Enums.TranslationSource.TextTranslation)
                                        @*#57738*@
                                        @*@Translation.Get("Visa i lista", Enums.TranslationSource.TextTranslation)*@
                                    </td>
                                    <td>
                                        <label class="checkbox">
                                            <input type="checkbox" name="casetype.ShowOnExternalPage" @(Model.CaseType.ShowOnExternalPage == 1 ? "checked=checked" : "") value="1" />
                                            <input type="hidden" name="casetype.ShowOnExternalPage" value="0" />
                                            &nbsp;@Translation.Get("Visa ärendetypen på självservice", Enums.TranslationSource.TextTranslation)
                                        </label>
                                        @*<label class="checkbox">
                                            <input type="checkbox" name="casetype.Selectable" @(Model.CaseType.Selectable == 1 ? "checked=checked" : "") value="1" />
                                            <input type="hidden" name="casetype.Selectable" value="0" />
                                            &nbsp;@Translation.Get("Helpdesk", Enums.TranslationSource.TextTranslation)
                                        </label>
                                        <label class="checkbox">
                                            <input type="checkbox" name="casetype.ShowOnExternalPage" @(Model.CaseType.ShowOnExternalPage == 1 ? "checked=checked" : "") value="1" />
                                            <input type="hidden" name="casetype.ShowOnExternalPage" value="0" />
                                            &nbsp;@Translation.Get("Självservice", Enums.TranslationSource.TextTranslation)
                                        </label>*@         
                                    </td>
                                </tr>
                                @*#57738 Remove this later*@
                                <tr>
                                    <td>
                                        @Translation.Get("Valbar", Enums.TranslationSource.TextTranslation)
                                    </td>
                                    <td>
                                        <label class="checkbox">
                                            <input type="checkbox" name="casetype.Selectable" @(Model.CaseType.Selectable == 1 ? "checked=checked" : "") value="1" />
                                            <input type="hidden" name="casetype.Selectable" value="0" />
                                        </label>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        @Translation.Get("Aktiv", Enums.TranslationSource.TextTranslation)
                                    </td>
                                    <td><label class="checkbox">
                                        <input type="checkbox" name="casetype.IsActive" @(Model.CaseType.IsActive == 1 ? "checked=checked" : "") value="1"/>
                                        <input type="hidden" name="casetype.IsActive" value="0" />
                                        &nbsp;@Translation.Get("Aktiv", Enums.TranslationSource.TextTranslation)
                                        </label>
                                    </td>
                                </tr>
                            </table>
                            @Html.HiddenFor(model => model.CaseType.Customer_Id)
                            @Html.HiddenFor(model => model.CaseType.Id)
                            @Html.HiddenFor(model => model.CaseType.Parent_CaseType_Id)
                            @Html.HiddenFor(model => model.CaseType.IsEMailDefault)
                            @Html.HiddenFor(model => model.CaseType.CaseTypeGUID)
                            @Html.HiddenFor(model => model.CaseType.ShowOnExtPageCases)
                        </div>
                    </div>
                </div>

                @if (Model.CaseType.SubCaseTypes != null && Model.CaseType.SubCaseTypes.Any())
                {
                    <div class="container">
                        <h4>@Translation.Get("Ärendetyper", Enums.TranslationSource.TextTranslation)</h4>
                        <table class="table table-striped table-bordered table-hover" id="tblSubCaseType">
                            <thead>
                                <tr>
                                    <th>
                                        @Translation.Get("Ärendetyp", Enums.TranslationSource.TextTranslation)
                                    </th>
                                    <th>
                                        @Translation.Get("Standard", Enums.TranslationSource.TextTranslation)
                                    </th>
                                    <th>
                                        @Translation.Get("Kräver godkännande", Enums.TranslationSource.TextTranslation)
                                    </th>
                                    <th>
                                        @Translation.Get("Aktiv", Enums.TranslationSource.TextTranslation)
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                @Html.CaseTypeTreeString(Model.CaseType.SubCaseTypes.ToList())
                            </tbody>
                        </table>
                    </div>
                }
            </div>
        </div>
    </div>
</div>

