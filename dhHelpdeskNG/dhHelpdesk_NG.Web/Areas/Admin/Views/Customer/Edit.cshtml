@using DH.Helpdesk.Web.Infrastructure
@model DH.Helpdesk.Web.Areas.Admin.Models.CustomerInputViewModel
@{
    ViewBag.Title = "Edit";
}
@using (Html.BeginForm("edit", "customer", new { id = Model.Customer.Id }, FormMethod.Post, new { id = "target" }))
{
    <div class="secnavs fixed">
        <div class="pull-left">
            <ul class="secnav">
                <li>@Html.ActionLink(Translation.Get("Spara", Enums.TranslationSource.TextTranslation), "edit", new { id = Model.Customer.Id }, new { onclick = "submitForm();return false;", @class = "btn" })</li>
                <li>@Html.ActionLink(Translation.Get("Avbryt", Enums.TranslationSource.TextTranslation), "index", null, new { @class = "btn" })</li>
                @*@if (Model.Customer.Id != null)
                {
                    <li><a data-toggle="modal" href="#divCopyCustomer" title="@Translation.Get("Kopiera", Enums.TranslationSource.TextTranslation)" class="btn">@Translation.Get("Kopiera", Enums.TranslationSource.TextTranslation)</a></li>
                }*@
            </ul>
        </div>
          @Html.Partial("_MasterDataPanel", Model.Customer)
    </div>
    @Html.Partial("_Input", Model)
    <input type="hidden" id="customerId" value="@Model.Customer.Id" />
    <div id="divCopyCustomer" role="dialog" class="modal hide fade" aria-labelledby="myModalLabel" aria-hidden="true" >
        @Html.Partial("_CopyCustomer", Model)
    </div>
}

@section Scripts {
    <script type="text/javascript">
       
        //function save(Id) {
        //    var cnumber = document.getElementById("customernumber").value;
        //    var cname = document.getElementById("customername").value;
        //    copyCustomer(Id, cnumber, cname);
        //}

        function copyCustomer(id) {
            var cnumber = document.getElementById("customernumber").value;
            var cname = document.getElementById("customername").value;
            var cemail = document.getElementById("customeremail").value;
            $.post('/customer/CopyCustomer/', { id: id, customerNumber: cnumber, customerName: cname, customerEmail: cemail }, function (data) {
    
                });
          
        }

        function submitForm() {
            
            for (var i = 0; i < document.getElementById("UsSelected").length; i++) {
                document.getElementById("UsSelected")[i].selected = true;
            }

            $("#target").submit();
        }
</script>


}