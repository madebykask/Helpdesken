@model DH.Helpdesk.Web.Areas.Admin.Models.CustomerInputViewModel
<h4>@Translation.Get("Allmänt", Enums.TranslationSource.TextTranslation)</h4>
<div class="formContainer">
    <table class="tableform" border="0">
        @if (Model.Customer.Id > 0)
        {
            <tr>
                <td class="span3">
                    @Translation.Get("Id", Enums.TranslationSource.TextTranslation)
                </td>
                <td>
                    @Html.DisplayTextFor(model => model.Customer.Id)
                </td>
            </tr>
        }
        <tr>
            <td class="span3">
                @Translation.Get("Kundnummer", Enums.TranslationSource.TextTranslation) <span>&nbsp;*</span>
            </td>
            @if (Model.Customer.Id > 0)
            {
                <td>
                    @Html.DisplayTextFor(model => model.Customer.CustomerID)
                </td>
            }
            else
            {
                <td>
                    @Html.TextBoxFor(model => model.Customer.CustomerID, new { maxlength = "20" })
                </td>
            }
        </tr>
        <tr>
            <td>
                @Translation.Get("Namn", Enums.TranslationSource.TextTranslation)<span>&nbsp;*</span>
            </td>
            <td>
                @Html.TextBoxFor(model => model.Customer.Name, new { maxlength = "50" })
            </td>
        </tr>
        <tr>
            <td>
                @Translation.Get("Adress", Enums.TranslationSource.TextTranslation)
            </td>
            <td>
                @Html.TextBoxFor(model => model.Customer.Address, new { maxlength = "50" })
            </td>
        </tr>
        <tr>
            <td>
                @Translation.Get("Postadress", Enums.TranslationSource.TextTranslation)
            </td>
            <td>
                @Html.TextBoxFor(model => model.Customer.PostalCode, new { maxlength = "8", style = "width: 60px;" })
                @Html.TextBoxFor(model => model.Customer.PostalAddress, new { maxlength = "30", style = "width: 222px;" })
            </td>
        </tr>
        <tr>
            <td>
                @Translation.Get("Telefon", Enums.TranslationSource.TextTranslation)
            </td>
            <td>
                @Html.TextBoxFor(model => model.Customer.Phone, new { maxlength = "20" })
            </td>
        </tr>
        <tr>
            <td>
                @Translation.Get("Språk", Enums.TranslationSource.TextTranslation)
            </td>
            <td>
                @Html.DropDownListFor(model => model.Customer.Language_Id, Model.Languages, "", new { })
            </td>
        </tr>
        <tr>
            <td>
                @Translation.Get("Aktiv", Enums.TranslationSource.TextTranslation)
            </td>
            <td>
                @Html.CheckBoxFor(model => model.Active)
            </td>
        </tr>
    </table>
</div>
<h4>@Translation.Get("Användare", Enums.TranslationSource.TextTranslation)</h4>
<div class="formContainer">

    <table id="customerUser" class="tableform" border="0">
        <tbody>
            <tr>
                <td class="span1">
                    @Translation.Get("Användare", Enums.TranslationSource.TextTranslation)
                </td>
                <td class="span5">
                    @Translation.Get("Tillgängliga", Enums.TranslationSource.TextTranslation)
                </td>
                <td>
                    @Translation.Get("Följande användare har rättighet till kunden", Enums.TranslationSource.TextTranslation)
                </td>
            </tr>
            <tr>
                <td></td>
                <td colspan="2">
                    <table>
                        <tr>
                            <td>
                                <select id="UsAvailable" multiple="multiple" name="UsAvailable" style="width: 314px; height: 350px">
                                    @foreach (var us in Model.AvUsMultiSelect.Items)
                                    {
                                        var classType = us.IsActive ? "" : "style=color:lightgray;";
                                        <option @classType value="@us.Id"> @us.Value </option>
                                    }
                                </select>
                                @* @Html.ListBox("UsAvailable", Model.UsAvailable, new { style = "width: 314px; height: 350px" })*@
                            </td>
                            <td>
                                <input type="button" value="&gt;" class="btn" id="addUs" /><br />
                                <input type="button" value="&lt;" class="btn" id="removeUs" />
                            </td>
                            <td>
                                <select id="UsSelected" multiple="multiple" name="UsSelected" style="width: 314px; height: 350px">
                                    @foreach (var us in Model.UsMultiSelect.Items)
                                    {
                                        var classType = us.IsActive ? "" : "style=color:lightgray;";
                                        <option @classType value="@us.Id"> @us.Value </option>
                                    }
                                </select>
                                @*@Html.ListBox("UsSelected", Model.UsSelected, new { style = "width: 314px; height: 350px" })*@
                            </td>
                        </tr>
                    </table>

                </td>
            </tr>
            <tr>
                <td style="width:220px">
                    @Translation.Get("Användaren är förvald som handläggare på nya externa ärenden", Enums.TranslationSource.TextTranslation)<br />
                </td>
                <td colspan="2">
                    <select data-val="true" data-val-number="The field DefaultAdministratorExternal must be a number." id="Setting_DefaultAdministratorExternal" name="Setting.DefaultAdministratorExternal">
                        <option value=""> </option>
                        @foreach (var us in Model.UsMultiSelect.Items)
                        {
                            var classType = us.IsActive ? "" : "style=color:lightgray;";
                            <option @classType value="@us.Id" @us.Id.ValueIsSelected(Model.Setting.DefaultAdministratorExternal.ToString())> @us.Value </option>
                        }
                    </select>
                    @*@Html.DropDownListFor(model => model.Setting.DefaultAdministratorExternal, Model.UsSelected, "", new { })*@
                </td>
            </tr>
            <tr>
                <td style="width:220px">
                    @Translation.Get("Användaren är förvald som handläggare på nya ärenden", Enums.TranslationSource.TextTranslation)
                </td>
                <td colspan="2">
                    <select data-val="true" data-val-number="The field DefaultAdministrator must be a number." id="Setting_DefaultAdministrator" name="Setting.DefaultAdministrator">
                        <option value=""> </option>
                        @foreach (var us in Model.UsMultiSelect.Items)
                        {
                            var classType = us.IsActive ? "" : "style=color:lightgray;";
                            <option @classType value="@us.Id" @us.Id.ValueIsSelected(Model.Setting.DefaultAdministrator.ToString())> @us.Value </option>
                        }
                    </select>
                    @*@Html.DropDownListFor(model => model.Setting.DefaultAdministrator, Model.UsSelected, "", new { })*@
                </td>
            </tr>
            <tr>
                <td style="width:220px">
                    @Translation.Get("Lista användaren")
                </td>
                <td colspan="2">
                    @Html.DropDownListFor(m => m.UserFirstLastNameRepresentationId, Model.UserFirstLastNameRepresentationList)
                </td>
            </tr>
        </tbody>
    </table>

</div>

<h4>@Translation.Get("Beställning", Enums.TranslationSource.TextTranslation)</h4>
<div class="formContainer">
    <table class="tableform">
        <tr>
            <td class="span3">
                @Translation.Get("Skapa ärende", Enums.TranslationSource.TextTranslation)
            </td>
            <td>
                <input type="checkbox" name="setting.CreateCaseFromOrder" @(Model.Setting.CreateCaseFromOrder == 1 ? "checked=checked" : "") value="1" />
                <input type="hidden" name="setting.CreateCaseFromOrder" value="0" />
                &nbsp; @Translation.Get("skapa alltid ärende när beställning görs", Enums.TranslationSource.TextTranslation)
            </td>
        </tr>
        <tr>
            <td>
                @Translation.Get("Beställare", Enums.TranslationSource.TextTranslation)
            </td>
            <td>
                <input type="radio" name="OrderPermission" @(Model.OrderPermission == 0 ? "checked='checked'" : "") id="Customer_OrderPermission1" value="0" />
                @Translation.Get("Inga restriktioner på vem som får anges som beställare", Enums.TranslationSource.TextTranslation)
                <br />
                <input type="radio" name="OrderPermission" @(Model.OrderPermission == 1 ? "checked='checked'" : "") id="Customer_OrderPermission2" value="1" />
                @Translation.Get("Tillåt endast godkända beställare", Enums.TranslationSource.TextTranslation)
            </td>
        </tr>
    </table>
</div>
<h4>@Translation.Get("E-post", Enums.TranslationSource.TextTranslation) @Translation.Get("Inställningar", Enums.TranslationSource.TextTranslation)</h4>
<div class="formContainer">
    <table class="tableform">
        <tr>
            <td>
                @Translation.Get("Batch e-post", Enums.TranslationSource.TextTranslation)
            </td>
            <td>
                @Html.CheckBoxFor(model => model.Setting.BatchEmail)
            </td>
        </tr>
        <tr>
            <td>
                @Translation.Get("Informera anmälaren som standard", Enums.TranslationSource.TextTranslation)?
            </td>
            <td>
                @Html.DropDownListFor(model => model.Customer.CommunicateWithNotifier, Model.CWNSelect)
            </td>
        </tr>
        <tr>
            <td class="span3">
                @Translation.Get("Helpdesk e-post", Enums.TranslationSource.TextTranslation)
            </td>
            <td>
                @Html.TextBoxFor(model => model.Customer.HelpdeskEmail, new { maxlength = "100", style = "width: 600px;" })
            </td>
        </tr>
        <tr>
            <td style="vertical-align: top">
                @Translation.Get("Statistik", Enums.TranslationSource.TextTranslation)
            </td>
            <td>
                @Translation.Get("Skicka ärendestatistik till följande e-post adresser", Enums.TranslationSource.TextTranslation)<br />
                @Translation.Get("Separera adresser med semikolon", Enums.TranslationSource.TextTranslation) (;)<br />
                @Html.TextAreaFor(model => model.Customer.CaseStatisticsEmailList, new { style = "width: 600px; height: 65px;", maxlength = "500" })
            </td>
        </tr>
        <tr>
            <td style="vertical-align: top">
                @Translation.Get("Dagrapport e-post", Enums.TranslationSource.TextTranslation)
            </td>
            <td>
                @Translation.Get("Skicka dagrapport till följande e-post adresser", Enums.TranslationSource.TextTranslation)<br />
                @Translation.Get("Separera adresser med semikolon", Enums.TranslationSource.TextTranslation) (;)<br />
                @Html.TextAreaFor(model => model.Customer.DailyReportEmail, new { style = "width: 600px; height: 65px;", maxlength = "500" })
            </td>
            <td></td>
        </tr>
        <tr>
            <td style="vertical-align: top">
                @Translation.Get("Nytt ärende", Enums.TranslationSource.TextTranslation)
            </td>
            <td>
                @Translation.Get("Skicka e-post till följande e-post adresser när nytt ärende registreras", Enums.TranslationSource.TextTranslation)<br />
                @Translation.Get("Separera adresser med semikolon", Enums.TranslationSource.TextTranslation) (;)<br />
                @Html.TextAreaFor(model => model.Customer.NewCaseEmailList, new { style = "width: 600px; height: 65px;", maxlength = "500" })
            </td>
        </tr>
        <tr>
            <td style="vertical-align: top">
                @Translation.Get("Avslutat ärende", Enums.TranslationSource.TextTranslation)
            </td>
            <td>
                @Translation.Get("Skicka e-post till följande e-post adresser när ett ärende avslutas", Enums.TranslationSource.TextTranslation)<br />
                @Translation.Get("Separera adresser med semikolon", Enums.TranslationSource.TextTranslation) (;)<br />
                @Html.TextAreaFor(model => model.Customer.CloseCaseEmailList, new { style = "width: 600px; height: 65px;", maxlength = "500" })
            </td>
        </tr>
        <tr>
            <td style="vertical-align: top">
                @Translation.Get("Ansvarig", Enums.TranslationSource.TextTranslation)
            </td>
            <td>
                @Translation.Get("Skicka e-post till följande e-postadresser om ärenden inte åtgärdas eller prioriteras inom", Enums.TranslationSource.TextTranslation)
                &nbsp; @Html.TextBoxFor(model => model.Customer.ResponsibleReminderControlTime, new { style = "width: 30px;" })
                &nbsp; @Translation.Get("timmar", Enums.TranslationSource.TextTranslation)<br />
                @Html.TextAreaFor(model => model.Customer.ResponsibleReminderEmailList, new { style = "width: 600px; height: 65px;", maxlength = "400" })
            </td>
        </tr>
    </table>

</div>

<h4>@Translation.Get("Tidsinställningar", Enums.TranslationSource.TextTranslation)</h4>
<div class="formContainer">
    <table class="tableform">
        <tr>
            <td class="span3">
                @Translation.Get("Arbetstid", Enums.TranslationSource.TextTranslation)
            </td>
            <td>
                @Html.TextBoxFor(model => model.Customer.WorkingDayStart, new { style = "width: 40px;" }) @Translation.Get("-", Enums.TranslationSource.TextTranslation) @Html.TextBoxFor(model => model.Customer.WorkingDayEnd, new { style = "width: 40px;" })
            </td>
        </tr>
        <tr>
            <td class="span3">
                @Translation.Get("Tidszon", Enums.TranslationSource.TextTranslation)
            </td>
            <td>
                @Html.DropDownListFor(model => model.Customer.TimeZoneId, Model.TimeZones, new { style = "width: 600px;" })
            </td>
        </tr>
        <tr>
            <td class="span3" style="vertical-align: middle">
                @Translation.Get("Löst i tid med Bevakningsdatum", Enums.TranslationSource.TextTranslation)
            </td>
            <td>
                <input type="radio" name="Setting.CalcSolvedInTimeByLatestSLADate" @(Model.Setting.CalcSolvedInTimeByLatestSLADate == 0 ? "checked='checked'" : "") id="Customer_Setting_CalcSolvedInTimeByLatestSLADate1" value="0" />
                @Translation.Get("Avslutsdatum", Enums.TranslationSource.TextTranslation)
                <br />
                <input type="radio" name="Setting.CalcSolvedInTimeByLatestSLADate" @(Model.Setting.CalcSolvedInTimeByLatestSLADate == 1 ? "checked='checked'" : "") id="Customer_Setting_CalcSolvedInTimeByLatestSLADate2" value="1" />
                @Translation.Get("Senaste understatus med Räkna tid", Enums.TranslationSource.TextTranslation)
            </td>
        </tr>
    </table>
</div>
@Html.HiddenFor(model => model.Setting.MinRegWorkingTime)
@Html.HiddenFor(model => model.Setting.CreateComputerFromOrder)
<script type="text/javascript">

    var validator = $("#target").validate({
        ignore: "",
        rules: {
            "Customer.CustomerID": {
                required: true
            },
            "Customer.Name": {
                required: true
            },
            "Customer.WorkingDayStart": {
                range: [0, 24]
            },
            "Customer.WorkingDayEnd": {
                range: [0, 24]
            }
        },
        messages: {
            "Customer.CustomerID": {
                required: "@Translation.GetForJS("Kundnummer")" + " " + "@Translation.GetForJS("måste anges")"
            },
            "Customer.Name": {
                required: "@Translation.GetForJS("Namn")" + " " + "@Translation.GetForJS("måste anges")"
            },
            "Customer.WorkingDayStart": {
                range: "@Translation.GetForJS("Var vänlig ange tid i siffror mellan 0-24 (i.e 8-17)")"
            },
            "Customer.WorkingDayEnd": {
                range: "@Translation.GetForJS("Var vänlig ange tid i siffror mellan 0-24 (i.e 8-17)")"
            }
        },
        submitHandler: function (form) {
            form.submit();
        }
    });

    $("#addUs").click(function () {
        $("#UsAvailable option:selected").remove().appendTo("#UsSelected");
        $("#UsAvailable").get(0).selectedIndex = -1;
        $("#UsSelected").get(0).selectedIndex = -1;
        return false;
    });

    $("#removeUs").click(function () {
        $("#UsSelected option:selected").remove().appendTo("#UsAvailable");
        $("#UsAvailable").get(0).selectedIndex = -1;
        $("#UsSelected").get(0).selectedIndex = -1;
        return false;
    });

</script>
