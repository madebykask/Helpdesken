@using DH.Helpdesk.Web.Infrastructure
@model DH.Helpdesk.Web.Areas.Admin.Models.BusinessRule.BRActionModel
@{
    ViewBag.Title = "Rule Actions";
}


<h4>@Translation.Get("Actions")</h4>

<table >          
    <tbody>       
        <tr>
            <td class="span2"> @Translation.Get("Mail Template") </td>
            <td>
                @Html.DropDownListFor(x => x.EmailTemplateId, Model.EMailTemplates, "", new { @id = "lstEmailTemplates", name = "lstEmailTemplates", @class = "BR-chosen-single-select"})
                @Html.ValidationMessageFor(x => x.EmailTemplateId)
            </td>            
        </tr>
        <tr>      
            <td>
                @Translation.Get("Email Group")
            </td>           
            <td>
                @{var mailGroupSelected = string.Join(",", Model.EMailGroups.Where(p => p.Selected).Select(p => p.Value));}
                <select id="lstEmailGroups" name="lstEmailGroups" class="BR-chosen-select" multiple="multiple">  
                    @foreach (var emailGroup in Model.EMailGroups)
                    {
                        <option value="@emailGroup.Value" @emailGroup.Value.ValueIsSelected(mailGroupSelected) class="@(emailGroup.Disabled ? "DisabledChosen" : "")">
                            @emailGroup.Text
                        </option>
                    }
                </select>
            </td>                              
        </tr>        
        <tr>      
            <td>
                @Translation.Get("Working Group")
            </td>           
            <td>
                @{var workingGroupSelected = string.Join(",", Model.WorkingGroups.Where(p => p.Selected).Select(p => p.Value));}
                <select id="lstWorkingGroups" name="lstWorkingGroups" class="BR-chosen-select" multiple="multiple">  
                    @foreach (var workingGroup in Model.WorkingGroups)
                    {
                        <option value="@workingGroup.Value" @workingGroup.Value.ValueIsSelected(workingGroupSelected) class="@(workingGroup.Disabled ? "DisabledChosen" : "")">
                            @workingGroup.Text
                        </option>
                    }
                </select>
            </td>                              
        </tr> 
        <tr>      
            <td>
                @Translation.Get("Administrator")
            </td>           
            <td>
                @{var selectedItems = string.Join(",", Model.Administrators.Where(p => p.Selected).Select(p => p.Value));}
                <select id="lstAdministrators" name="lstAdministrators" class="BR-chosen-select" multiple="multiple">  
                    @foreach (var administrator in Model.Administrators)
                    {
                        <option value="@administrator.Value" @administrator.Value.ValueIsSelected(selectedItems) class="@(administrator.Disabled ? "DisabledChosen" : "")">
                            @administrator.Text
                        </option>
                    }
                </select>              
            </td>                              
        </tr>              
        <tr>
            <td class="span2">
                @Translation.Get("Recipients", Enums.TranslationSource.TextTranslation)
            </td>
            <td>
                @Html.TextBoxFor(m => Model.Recipients, new { id="recipients", @class="BR-text"})
            </td>
        </tr>
        <tr>
            <td class="span2">
                @Translation.Get("Skapad av", Enums.TranslationSource.TextTranslation)
            </td>
            <td>
                @Html.CheckBoxFor(m => Model.CaseCreator, new {@class = "switchcheckbox", id = "caseCreator"})
            </td>
        </tr>
        <tr>
            <td class="span2">
                @Translation.Get("Anmälare", Enums.TranslationSource.TextTranslation)
            </td>
            <td>
                @Html.CheckBoxFor(m => Model.Initiator, new {@class = "switchcheckbox", id = "initiator"})
            </td>
        </tr>
        <tr>
            <td class="span2">
                @Translation.Get("Angående", Enums.TranslationSource.TextTranslation)
            </td>
            <td>
                @Html.CheckBoxFor(m => Model.CaseIsAbout, new { @class = "switchcheckbox", id = "caseIsAbout"})
            </td>
        </tr>
    </tbody>    
</table>


